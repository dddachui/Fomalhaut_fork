<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>dddachuiğŸš­</title>
  
  
  <link href="https://www.dddachui.top/atom.xml" rel="self"/>
  
  <link href="https://www.dddachui.top/"/>
  <updated>2023-03-30T14:56:05.669Z</updated>
  <id>https://www.dddachui.top/</id>
  
  <author>
    <name>dddachui.top</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>ä¸‰å‰‘å®¢-sed</title>
    <link href="https://www.dddachui.top/posts/c9de9d82.html"/>
    <id>https://www.dddachui.top/posts/c9de9d82.html</id>
    <published>2023-03-30T14:28:45.000Z</published>
    <updated>2023-03-30T14:56:05.669Z</updated>
    
    <content type="html"><![CDATA[<h1>æ›¿æ¢</h1><p>åœ¨Linuxç³»ç»Ÿä¸­ï¼Œå¯ä»¥ä½¿ç”¨sedå‘½ä»¤æ¥æ›¿æ¢æ–‡ä»¶ä¸­çš„æ–‡æœ¬å†…å®¹ã€‚è¦å°†æ‰€æœ‰çš„â€œkylinâ€æ›¿æ¢ä¸ºâ€œikunâ€ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">sed</span> -i <span class="string">&#x27;s/kun/ikun/g&#x27;</span> filename</span><br></pre></td></tr></table></figure><p>å°†ä¸Šé¢çš„ <code>filename</code> æ›¿æ¢ä¸ºå®é™…çš„æ–‡ä»¶åï¼Œè¿™ä¸ªå‘½ä»¤å°†ç›´æ¥ä¿®æ”¹è¿™ä¸ªæ–‡ä»¶ï¼Œå°†å…¶ä¸­æ‰€æœ‰çš„â€œkylinâ€æ›¿æ¢ä¸ºâ€œikunâ€ã€‚</p><p>è§£é‡Šä¸€ä¸‹å‘½ä»¤ä¸­çš„é€‰é¡¹å’Œå‚æ•°ï¼š</p><ul><li><code>-i</code>ï¼šè¡¨ç¤ºç›´æ¥ä¿®æ”¹æ–‡ä»¶å†…å®¹ï¼Œè€Œä¸æ˜¯è¾“å‡ºåˆ°ç»ˆç«¯æˆ–å¦ä¸€ä¸ªæ–‡ä»¶ä¸­ã€‚</li><li><code>s/kun/ikun/g</code>ï¼šè¿™æ˜¯ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ï¼Œè¡¨ç¤ºå°†â€œkylinâ€æ›¿æ¢ä¸ºâ€œikunâ€ã€‚å…¶ä¸­ï¼Œ<code>s</code>è¡¨ç¤ºæ›¿æ¢æ“ä½œï¼Œ<code>/</code>æ˜¯åˆ†éš”ç¬¦ï¼Œ<code>g</code>è¡¨ç¤ºå…¨å±€æ›¿æ¢ï¼Œå³å°†æ¯ä¸ªåŒ¹é…çš„â€œkunâ€éƒ½æ›¿æ¢ä¸ºâ€œikunâ€ã€‚</li></ul><p>è¯·æ³¨æ„ï¼Œåœ¨ä½¿ç”¨sedå‘½ä»¤ä¿®æ”¹æ–‡ä»¶å†…å®¹æ—¶ï¼Œå»ºè®®å…ˆå¤‡ä»½åŸæ–‡ä»¶ï¼Œä»¥é˜²æ­¢æ„å¤–ä¿®æ”¹å¯¼è‡´æ•°æ®ä¸¢å¤±ã€‚</p><h1>å¢åŠ </h1><p>åœ¨Linuxç³»ç»Ÿä¸­ï¼Œå¯ä»¥ä½¿ç”¨sedå‘½ä»¤æ¥ä¿®æ”¹GRUBå¼•å¯¼å‚æ•°ï¼Œä»¥æ·»åŠ  <code>net.ifnames=1 biosdevname</code> é€‰é¡¹ã€‚è¦åœ¨quieté€‰é¡¹åå¢åŠ è¿™ä¸ªé€‰é¡¹ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo sed -i <span class="string">&#x27;s/quiet/quiet net.ifnames=1 biosdevname/g&#x27;</span> <span class="regexp">/etc/</span><span class="keyword">default</span>/grub</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªå‘½ä»¤å°†ä¿®æ”¹ <code>/etc/default/grub</code> æ–‡ä»¶ï¼Œå°†å…¶ä¸­çš„ <code>quiet</code> é€‰é¡¹æ›¿æ¢ä¸º <code>quiet net.ifnames=1 biosdevname</code>ï¼Œå¹¶ä¿å­˜ä¿®æ”¹åçš„æ–‡ä»¶ã€‚</p><p>è§£é‡Šä¸€ä¸‹å‘½ä»¤ä¸­çš„é€‰é¡¹å’Œå‚æ•°ï¼š</p><ul><li><code>sudo</code>ï¼šè¡¨ç¤ºä½¿ç”¨ç®¡ç†å‘˜æƒé™æ¥æ‰§è¡Œå‘½ä»¤ã€‚</li><li><code>-i</code>ï¼šè¡¨ç¤ºç›´æ¥ä¿®æ”¹æ–‡ä»¶å†…å®¹ï¼Œè€Œä¸æ˜¯è¾“å‡ºåˆ°ç»ˆç«¯æˆ–å¦ä¸€ä¸ªæ–‡ä»¶ä¸­ã€‚</li><li><code>s/quiet/quiet net.ifnames=1 biosdevname/g</code>ï¼šè¿™æ˜¯ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ï¼Œè¡¨ç¤ºå°† <code>quiet</code> æ›¿æ¢ä¸º <code>quiet net.ifnames=1 biosdevname</code>ã€‚å…¶ä¸­ï¼Œ<code>s</code>è¡¨ç¤ºæ›¿æ¢æ“ä½œï¼Œ<code>/</code>æ˜¯åˆ†éš”ç¬¦ï¼Œ<code>g</code>è¡¨ç¤ºå…¨å±€æ›¿æ¢ï¼Œå³å°†æ¯ä¸ªåŒ¹é…çš„ <code>quiet</code> éƒ½æ›¿æ¢ä¸º <code>quiet net.ifnames=1 biosdevname</code>ã€‚</li><li><code>/etc/default/grub</code>ï¼šæŒ‡å®šè¦ä¿®æ”¹çš„GRUBé…ç½®æ–‡ä»¶çš„è·¯å¾„ã€‚</li></ul><h1>åˆ é™¤</h1><p>åœ¨Linuxç³»ç»Ÿä¸­ï¼Œå¯ä»¥ä½¿ç”¨sedå‘½ä»¤æ¥åˆ é™¤æ–‡ä»¶ä¸­çš„ç‰¹å®šæ–‡æœ¬è¡Œã€‚è¦åˆ é™¤æ–‡ä»¶ä¸­çš„ <code>modprobe.blacklist=nouveau</code> è¡Œï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">sed</span> -i <span class="string">&#x27;/modprobe.blacklist=nouveau/d&#x27;</span> filename</span><br></pre></td></tr></table></figure><p>å°†ä¸Šé¢çš„ <code>filename</code> æ›¿æ¢ä¸ºå®é™…çš„æ–‡ä»¶åï¼Œè¿™ä¸ªå‘½ä»¤å°†ç›´æ¥ä¿®æ”¹è¿™ä¸ªæ–‡ä»¶ï¼Œå°†å…¶ä¸­æ‰€æœ‰åŒ…å« <code>modprobe.blacklist=nouveau</code> çš„è¡Œåˆ é™¤ã€‚</p><p>è§£é‡Šä¸€ä¸‹å‘½ä»¤ä¸­çš„é€‰é¡¹å’Œå‚æ•°ï¼š</p><ul><li><code>-i</code>ï¼šè¡¨ç¤ºç›´æ¥ä¿®æ”¹æ–‡ä»¶å†…å®¹ï¼Œè€Œä¸æ˜¯è¾“å‡ºåˆ°ç»ˆç«¯æˆ–å¦ä¸€ä¸ªæ–‡ä»¶ä¸­ã€‚</li><li><code>/modprobe.blacklist=nouveau/d</code>ï¼šè¿™æ˜¯ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ï¼Œè¡¨ç¤ºåˆ é™¤æ‰€æœ‰åŒ…å« <code>modprobe.blacklist=nouveau</code> çš„è¡Œã€‚å…¶ä¸­ï¼Œ<code>/</code>æ˜¯åˆ†éš”ç¬¦ï¼Œ<code>d</code>è¡¨ç¤ºåˆ é™¤åŒ¹é…çš„è¡Œã€‚</li></ul><p>è¯·æ³¨æ„ï¼Œåœ¨ä½¿ç”¨sedå‘½ä»¤ä¿®æ”¹æ–‡ä»¶å†…å®¹æ—¶ï¼Œå»ºè®®å…ˆå¤‡ä»½åŸæ–‡ä»¶ï¼Œä»¥é˜²æ­¢æ„å¤–ä¿®æ”¹å¯¼è‡´æ•°æ®ä¸¢å¤±ã€‚</p>]]></content>
    
    
    <summary type="html">æè¿°</summary>
    
    
    
    <category term="åˆ†ç±»" scheme="https://www.dddachui.top/categories/%E5%88%86%E7%B1%BB/"/>
    
    
    <category term="æš‚å­˜" scheme="https://www.dddachui.top/tags/%E6%9A%82%E5%AD%98/"/>
    
  </entry>
  
  <entry>
    <title>Linuxå¥½ç”¨å‘½ä»¤ä¹‹wall</title>
    <link href="https://www.dddachui.top/posts/c4b461e0.html"/>
    <id>https://www.dddachui.top/posts/c4b461e0.html</id>
    <published>2023-03-30T06:03:12.000Z</published>
    <updated>2023-03-30T14:55:54.351Z</updated>
    
    <content type="html"><![CDATA[<h1>ä½¿ç”¨æ–¹å¼</h1><ul><li>å‘æ‰€æœ‰ç»ˆç«¯å¹¿æ’­</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wall &quot;hello&quot;</span><br></pre></td></tr></table></figure><ul><li>æ’é™¤é‚®ä»¶å‰é¢çš„å¤´æ¡æ–‡æœ¬</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wall -n &quot;hello&quot;</span><br></pre></td></tr></table></figure><ul><li>ç»™ç»„å‘ä¿¡æ¯</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wall -g <span class="built_in">test</span> <span class="string">&quot;hello&quot;</span></span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1&gt;ä½¿ç”¨æ–¹å¼&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;å‘æ‰€æœ‰ç»ˆç«¯å¹¿æ’­&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight shell&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;</summary>
      
    
    
    
    <category term="linuxå‘½ä»¤" scheme="https://www.dddachui.top/categories/linux%E5%91%BD%E4%BB%A4/"/>
    
    
    <category term="linuxå‘½ä»¤" scheme="https://www.dddachui.top/tags/linux%E5%91%BD%E4%BB%A4/"/>
    
  </entry>
  
  <entry>
    <title>centosä¿®æ”¹ç½‘å¡å</title>
    <link href="https://www.dddachui.top/posts/63943f11.html"/>
    <id>https://www.dddachui.top/posts/63943f11.html</id>
    <published>2023-03-29T14:08:29.000Z</published>
    <updated>2023-03-29T14:26:19.435Z</updated>
    
    <content type="html"><![CDATA[<h1>éœ€æ±‚</h1><p>centos6ç³»ç»Ÿä½¿ç”¨çš„ç½‘å¡åéƒ½æ˜¯ethå¼€å¤´çš„ï¼Œè€Œcentos7ä»¥ä¸Šéƒ½æ˜¯ä»¥è®¾å¤‡ç±»å‹æ¥åˆ’åˆ†çš„ï¼Œå¦‚æœä½¿ç”¨ä¸ä¹ æƒ¯æˆ–è€…æœ‰å…¶ä»–xpå…´è¶£å¯ä»¥æ ¹æ®è‡ªå·±çš„å–œå¥½æ¥ä¿®æ”¹</p><h1>å‚æ•°è§£é‡Š</h1><h2 id="net-ifnames">net.ifnames</h2><p>ç”¨äºæ§åˆ¶Linuxç³»ç»Ÿä¸­ç½‘ç»œæ¥å£çš„å‘½åè§„åˆ™ï¼Œåœ¨ä¸åŒå‘è¡Œç‰ˆä¸Šæœ‰ä¸åŒçš„å‘½åæ–¹å¼ï¼Œè¯¥å‚æ•°æœ‰ä¸‰ç§é€‰é¡¹</p><ul><li>0ï¼šä½¿ç”¨ä¼ ç»Ÿçš„å‘½åï¼Œä¸€èˆ¬æ¥è¯´å®‰è£…ç³»ç»Ÿçš„æ—¶å€™ä½¿ç”¨è¿™ä¸ªå‚æ•°å°±å¯ä»¥äº†ï¼Œä½†éš¾å…ä¼šç¢°åˆ°ä¸€æ ·çš„æœºå™¨ç½‘å¡ç‰©ç†ä½ç½®ä¸€æ ·ä½†å®é™…æ¯å°æœºå™¨é¡ºåºå¯èƒ½ä¸ä¸€æ ·çš„é—®é¢˜</li><li>1ï¼šä½¿ç”¨åŸºäºè¿æ¥çš„å‘½åæ–¹å¼</li><li>2ï¼šä½¿ç”¨åŸºäºè·¯å¾„çš„å‘½åæ–¹å¼</li></ul><h3 id="biosdevname">biosdevname</h3><p><code>biosdevname</code> å‚æ•°æ˜¯ç”¨äºæ§åˆ¶Linuxç³»ç»Ÿä¸­ç½‘ç»œæ¥å£å‘½åçš„ä¸€ç§æœºåˆ¶ã€‚å½“è¯¥å‚æ•°å¯ç”¨æ—¶ï¼ŒLinuxç³»ç»Ÿä¼šåœ¨å‘½åç½‘ç»œæ¥å£æ—¶ä½¿ç”¨BIOSæä¾›çš„è®¾å¤‡åç§°ï¼Œè€Œä¸æ˜¯ä½¿ç”¨ä¼ ç»Ÿçš„åŸºäºæ€»çº¿ã€æ’æ§½å’Œç«¯å£çš„å‘½åæ–¹å¼ã€‚</p><p>å¯ç”¨<code>biosdevname</code>å‚æ•°çš„ä¸»è¦ä½œç”¨æ˜¯ç®€åŒ–ç½‘ç»œæ¥å£çš„ç®¡ç†å’Œé…ç½®ï¼Œç‰¹åˆ«æ˜¯åœ¨å…·æœ‰å¤šä¸ªç½‘ç»œæ¥å£çš„ç³»ç»Ÿä¸­ã€‚ä½¿ç”¨BIOSæä¾›çš„è®¾å¤‡åç§°å¯ä»¥ä½¿ç½‘ç»œç®¡ç†å‘˜æ›´å®¹æ˜“è¯†åˆ«å’ŒåŒºåˆ†ä¸åŒçš„ç½‘ç»œæ¥å£ï¼Œå¹¶æ›´å®¹æ˜“åœ°é…ç½®å’Œç®¡ç†ç½‘ç»œæ¥å£ã€‚</p><p>è¯·æ³¨æ„ï¼Œå¯ç”¨<code>biosdevname</code>å‚æ•°å¯èƒ½ä¼šå¯¼è‡´Linuxç³»ç»Ÿä¸­ç½‘ç»œæ¥å£çš„å‘½åæ–¹å¼å‘ç”Ÿå˜åŒ–ï¼Œå› æ­¤åœ¨å¯ç”¨è¯¥å‚æ•°ä¹‹å‰ï¼Œå»ºè®®å¤‡ä»½ç½‘ç»œæ¥å£çš„é…ç½®æ–‡ä»¶ã€‚æ­¤å¤–ï¼Œè¯¥å‚æ•°éœ€è¦BIOSæ”¯æŒï¼Œå› æ­¤ä¸æ˜¯æ‰€æœ‰çš„ç³»ç»Ÿéƒ½æ”¯æŒè¯¥å‚æ•°</p><h1>centos6ä¿®æ”¹</h1><h2 id="ç§»é™¤ä¼˜å…ˆçº§é«˜çš„udevè§„åˆ™">ç§»é™¤ä¼˜å…ˆçº§é«˜çš„udevè§„åˆ™</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mv /lib/udev/rules.d/75-persistent-net-generator.rules  /tmp</span><br></pre></td></tr></table></figure><h2 id="ä¿®æ”¹udevè§„åˆ™">ä¿®æ”¹udevè§„åˆ™</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/udev/rules.d/70-persistent-net.rules</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹å†…å®¹å¦‚ä¸‹,å…¶ä¸­ATTRé™¤æ˜¯macåœ°å€ï¼ŒNAMEæ˜¯ä½ è¦ä¿®æ”¹çš„ç½‘å¡å</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ACTION==&quot;add&quot;, SUBSYSTEM==&quot;net&quot;, DRIVERS==&quot;?*&quot;, ATTR&#123;address&#125;==&quot;00:0c:29:2c:ad:8e&quot;, NAME=&quot;eth1&quot;</span><br></pre></td></tr></table></figure><h1>centos7 ä¿®æ”¹</h1><h2 id="ä¿®æ”¹å¼•å¯¼">ä¿®æ”¹å¼•å¯¼</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/default/grub</span><br></pre></td></tr></table></figure><p>åœ¨GRUB_CMDLINE_LINUXé™¤åŠ å…¥<code>net.ifnames=1 bisodevname=0</code>é€‰é¡¹å¹¶ç”¨<code>grub2-mkconfig</code>é‡æ–°ç”Ÿæˆgrub</p><h2 id="ä¿®æ”¹udevè§„åˆ™-2">ä¿®æ”¹udevè§„åˆ™</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/udev/rules.d/70-persistent-net.rules</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹å†…å®¹å¦‚ä¸‹,å…¶ä¸­ATTRé™¤æ˜¯macåœ°å€ï¼ŒNAMEæ˜¯ä½ è¦ä¿®æ”¹çš„ç½‘å¡å</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ACTION==&quot;add&quot;, SUBSYSTEM==&quot;net&quot;, DRIVERS==&quot;?*&quot;, ATTR&#123;address&#125;==&quot;00:0c:29:2c:ad:8e&quot;, NAME=&quot;eth1&quot;</span><br></pre></td></tr></table></figure><h2 id="ä¿®æ”¹é…ç½®æ–‡ä»¶">ä¿®æ”¹é…ç½®æ–‡ä»¶</h2><p>æ ¹æ®ä½¿ç”¨çš„ç½‘ç»œç®¡ç†å™¨ï¼ˆNetworkManageræˆ–è€…Networkï¼‰æ¥ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œå°†ç½‘å¡åæ›¿æ¢æ‰</p><h2 id="é‡å¯éªŒè¯">é‡å¯éªŒè¯</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">reboot</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">ä¿®æ”¹ç½‘å¡å</summary>
    
    
    
    <category term="ç½‘ç»œç®¡ç†" scheme="https://www.dddachui.top/categories/%E7%BD%91%E7%BB%9C%E7%AE%A1%E7%90%86/"/>
    
    
    <category term="ç½‘ç»œç®¡ç†" scheme="https://www.dddachui.top/tags/%E7%BD%91%E7%BB%9C%E7%AE%A1%E7%90%86/"/>
    
  </entry>
  
  <entry>
    <title>Linuxå¥½ç”¨å‘½ä»¤ä¹‹auditctl</title>
    <link href="https://www.dddachui.top/posts/ee30c79.html"/>
    <id>https://www.dddachui.top/posts/ee30c79.html</id>
    <published>2023-03-26T15:30:51.000Z</published>
    <updated>2023-03-26T10:39:21.258Z</updated>
    
    <content type="html"><![CDATA[<ul><li>åˆ—å‡ºè§„åˆ™</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">auditctl -l</span><br></pre></td></tr></table></figure><ul><li>å†™å…¥è§„åˆ™</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">auditctl -w ç›®å½•çš„ç»å¯¹è·¯å¾„</span><br></pre></td></tr></table></figure><ul><li>åˆ é™¤è§„åˆ™</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">audictl -W ç›®å½•çš„ç»å¯¹è·¯å¾„</span><br></pre></td></tr></table></figure><ul><li>å®¡è®¡çŠ¶æ€</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">auditctl -s</span><br></pre></td></tr></table></figure><ul><li>æŸ¥çœ‹æ•ˆæœ</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ausearch -f ç›®å½•çš„ç»å¯¹è·¯å¾„</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;ul&gt;
&lt;li&gt;åˆ—å‡ºè§„åˆ™&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight shell&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td cl</summary>
      
    
    
    
    <category term="linuxå‘½ä»¤" scheme="https://www.dddachui.top/categories/linux%E5%91%BD%E4%BB%A4/"/>
    
    
    <category term="linuxå‘½ä»¤" scheme="https://www.dddachui.top/tags/linux%E5%91%BD%E4%BB%A4/"/>
    
  </entry>
  
  <entry>
    <title>Linuxå¥½ç”¨å‘½ä»¤ä¹‹devtoolset</title>
    <link href="https://www.dddachui.top/posts/d171c710.html"/>
    <id>https://www.dddachui.top/posts/d171c710.html</id>
    <published>2023-03-26T15:30:51.000Z</published>
    <updated>2023-03-27T02:31:40.896Z</updated>
    
    <content type="html"><![CDATA[<h1>å‰è¨€</h1><p>CentOS/RHEL Linux å‘è¡Œç‰ˆä»¥ç¨³å®šæ€§è‘—ç§°ï¼Œæ‰€æœ‰çš„è½¯ä»¶éƒ½è¦å°½å¯èƒ½ stableï¼Œå¯¼è‡´çš„ä¸€ä¸ªç»“æœå°±æ˜¯åŸºç¡€è½¯ä»¶çš„ç‰ˆæœ¬éå¸¸çš„ä½ï¼Œæ¯”å¦‚ CentOS 6.7ï¼ˆ15å¹´å‘å¸ƒï¼‰ ä¸­ gcc ç‰ˆæœ¬è¿˜æ˜¯ 4.4.7ï¼ˆ12å¹´çš„ç‰ˆæœ¬ï¼‰ã€‚è¿™å¯¹å¼€å‘æ¥è¯´å°±ä¸æ˜¯å¾ˆå‹å¥½ï¼Œæ¯”å¦‚æˆ‘ä»¬æƒ³ç”¨ C++ 11 ä¸­çš„æŸä¸ªç‰¹æ€§ï¼Œå°±å¿…é¡»è‡ªå·±ç¼–è¯‘ä¸€ä¸ªé«˜ç‰ˆæœ¬çš„ gcc å‡ºæ¥ï¼Œä½†æ˜¯è¿™ä¼šæœ‰å¦å¤–ä¸€ä¸ªé—®é¢˜ï¼Œå¼€å‘ç¯å¢ƒä¸å¥½ç»´æŠ¤ï¼Œå¦‚æœè‡ªå·±æœ‰å¤šå°ç”µè„‘æˆ–è€…å¤šä¸ªäººåˆä½œçš„é¡¹ç›®ï¼Œæ¯å°æœºå™¨ä¸Šéƒ½è¦è‡ªå·±ç¼–ä¸€ä»½ï¼Œç»´æŠ¤èµ·æ¥å°±æ¯”è¾ƒéº»çƒ¦ã€‚</p><h1>è§£å†³åŠæ³•</h1><p>devtoolset + scl<br>åœ¨centos7ä¸Šé»˜è®¤gccæ˜¯4.8.5ï¼Œå¦‚æœéœ€è¦gcc10å¯ä»¥å®‰è£…devtoolset-10ç‰ˆæœ¬æ¥æ”¯æŒï¼Œå…¶ä»–ç‰ˆæœ¬ä¹Ÿå¦‚æ­¤</p><h1>devtoolset-7ä¾èµ–å…³ç³»</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">å…ˆè£…è¿™2ä¸¤ä¸ªä¾èµ–</span></span><br><span class="line">devtoolset-7-runtime-7.1-4.ky3.kb1.x86_64.rpm</span><br><span class="line">devtoolset-7-binutils-2.28-11.ky3.kb1.x86_64.rpm</span><br><span class="line">devtoolset-7-gcc-7.3.1-5.15.ky3.kb1.x86_64.rpm</span><br><span class="line">devtoolset-7-libstdc++-devel-7.3.1-5.15.ky3.kb1.x86_64.rpm</span><br><span class="line">devtoolset-7-gcc-c++-7.3.1-5.15.ky3.kb1.x86_64.rpm</span><br></pre></td></tr></table></figure><h1>åˆ‡æ¢</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scl enable devtoolset-10 bash </span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1&gt;å‰è¨€&lt;/h1&gt;
&lt;p&gt;CentOS/RHEL Linux å‘è¡Œç‰ˆä»¥ç¨³å®šæ€§è‘—ç§°ï¼Œæ‰€æœ‰çš„è½¯ä»¶éƒ½è¦å°½å¯èƒ½ stableï¼Œå¯¼è‡´çš„ä¸€ä¸ªç»“æœå°±æ˜¯åŸºç¡€è½¯ä»¶çš„ç‰ˆæœ¬éå¸¸çš„ä½ï¼Œæ¯”å¦‚ CentOS 6.7ï¼ˆ15å¹´å‘å¸ƒï¼‰ ä¸­ gcc ç‰ˆæœ¬è¿˜æ˜¯ 4.4.7ï¼ˆ12å¹´çš„ç‰ˆæœ¬ï¼‰ã€‚è¿™å¯¹å¼€å‘æ¥è¯´å°±ä¸æ˜¯å¾ˆå‹å¥½</summary>
      
    
    
    
    <category term="linuxå‘½ä»¤" scheme="https://www.dddachui.top/categories/linux%E5%91%BD%E4%BB%A4/"/>
    
    
    <category term="linuxå‘½ä»¤" scheme="https://www.dddachui.top/tags/linux%E5%91%BD%E4%BB%A4/"/>
    
  </entry>
  
  <entry>
    <title>Linuxå¥½ç”¨å‘½ä»¤ä¹‹ethtool</title>
    <link href="https://www.dddachui.top/posts/c0d4357c.html"/>
    <id>https://www.dddachui.top/posts/c0d4357c.html</id>
    <published>2023-03-26T15:30:51.000Z</published>
    <updated>2023-03-27T02:21:37.754Z</updated>
    
    <content type="html"><![CDATA[<h1>å‘½ä»¤ç®€ä»‹</h1><p>æŸ¥çœ‹ç½‘å£ä¿¡æ¯</p><h1>æŸ¥çœ‹ç½‘å¡ä¿¡æ¯</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ethtool eth0</span><br></pre></td></tr></table></figure><ul><li>ç½‘å¡ä¿¡æ¯å¦‚ä¸‹<br>å¯ä»¥çœ‹å‡ºç½‘å¡çš„å¾ˆå¤šä¿¡æ¯,åŒ…æ‹¬ç½‘å¡é€Ÿç‡æ˜¯ç™¾å…†è¿˜æ˜¯åƒå…†</li></ul><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">Settings for enp2s0:</span><br><span class="line">        Supported ports: [ TP    MII ]</span><br><span class="line">        Supported link modes:   10baseT/Half 10baseT/Full</span><br><span class="line">                                100baseT/Half 100baseT/Full</span><br><span class="line">                                1000baseT/Half 1000baseT/Full</span><br><span class="line">        Supported pause frame use: Symmetric Receive-only</span><br><span class="line">        Supports auto-negotiation: Yes</span><br><span class="line">        Supported FEC modes: Not reported</span><br><span class="line">        Advertised link modes:  10baseT/Half 10baseT/Full</span><br><span class="line">                                100baseT/Half 100baseT/Full</span><br><span class="line">                                1000baseT/Half 1000baseT/Full</span><br><span class="line">        Advertised pause frame use: Symmetric Receive-only</span><br><span class="line">        Advertised auto-negotiation: Yes</span><br><span class="line">        Advertised FEC modes: Not reported</span><br><span class="line">        Link partner advertised link modes:  10baseT/Half 10baseT/Full</span><br><span class="line">                                             100baseT/Half 100baseT/Full</span><br><span class="line">                                             1000baseT/Full</span><br><span class="line">        Link partner advertised pause frame use: Symmetric</span><br><span class="line">        Link partner advertised auto-negotiation: Yes</span><br><span class="line">        Link partner advertised FEC modes: Not reported</span><br><span class="line">        Speed: 1000Mb/s  #å½“å‰é€Ÿç‡</span><br><span class="line">        Duplex: Full     </span><br><span class="line">        Auto-negotiation: on</span><br><span class="line">        master-slave cfg: preferred slave</span><br><span class="line">        master-slave status: slave</span><br><span class="line">        Port: Twisted Pair</span><br><span class="line">        PHYAD: 0</span><br><span class="line">        Transceiver: external</span><br><span class="line">        MDI-X: Unknown</span><br><span class="line">        Supports Wake-on: pumbg</span><br><span class="line">        Wake-on: d</span><br><span class="line">        Link detected: yes  #æ˜¯å¦è¿é€šç‰©ç†ç½‘çº¿</span><br></pre></td></tr></table></figure><h1>æŠŠç½‘å¡æŒ‡ç¤ºç¯æ‰“å¼€</h1><p>åœ¨ç½‘å¡æ”¯æŒè¿™ç§åŠŸèƒ½çš„å‰æä¸‹,ä½¿ç”¨æ­¤å‘½ä»¤ä¼šä½¿ç½‘å¡çš„æŒ‡ç¤ºç¯é—ªçƒ,ä½†éœ€è¦æ³¨æ„,æœ‰äº›ç³»ç»Ÿä¼šæŒç»­é—ªçƒ,ä½†æœ‰äº›ç‰ˆæœ¬ä¼šé—ªçƒå‡ ç§’</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ethtool -p eth0</span><br></pre></td></tr></table></figure><h1>æŸ¥çœ‹ç½‘å¡é©±åŠ¨ç¨‹åºä¿¡æ¯</h1><p>æŸ¥è¯¢æŒ‡å®šçš„ç½‘ç»œè®¾å¤‡ä»¥è·å–ç›¸å…³çš„é©±åŠ¨ç¨‹åºä¿¡æ¯ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ethtool -i eth0</span><br></pre></td></tr></table></figure><p>å¦‚ä¸‹</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">driver: e1000</span><br><span class="line">version: 7.3.21-k8-NAPI</span><br><span class="line">firmware-version: </span><br><span class="line">expansion-rom-version: </span><br><span class="line">bus-info: 0000:02:01.0</span><br><span class="line">supports-statistics: yes</span><br><span class="line">supports-test: yes</span><br><span class="line">supports-eeprom-access: yes</span><br><span class="line">supports-register-dump: yes</span><br><span class="line">supports-priv-flags: no</span><br></pre></td></tr></table></figure><h1>åˆ—å‡ºç½‘ç»œæ¥å£ç»Ÿè®¡ä¿¡æ¯</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ethtool -S eth0</span><br></pre></td></tr></table></figure><h1>è®¾ç½®ç½‘ç»œæ¥å£é€Ÿåº¦</h1><p>eth0è‡ªé€‚åº”100ã€1000ï¼ŒæŒ‡å®šä»–æ˜¯ç™¾å…†</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ethtool -s eth0 speed 1000 duplex full autoneg off</span><br></pre></td></tr></table></figure><h1>é‡ç½®ç½‘å¡åˆ°è‡ªé€‚åº”æ¨¡å¼</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ethtool -r eth0</span><br></pre></td></tr></table></figure><h1>å°†ethtoolçš„è®¾ç½®è·Ÿéšç½‘å¡</h1><p>å†™åœ¨ifcfg-ethXé…ç½®é‡Œé¢</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ETHTOOL_OPTS=&quot;speed 100 deplex full autoneg off&quot;</span><br></pre></td></tr></table></figure><h1>æŸ¥çœ‹é”™è¯¯ä¿¡æ¯</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ethtool -S eth0 | grep error</span><br></pre></td></tr></table></figure><p>åŒæ—¶ï¼Œä½¿ç”¨<code>ifconfig</code> ä¹Ÿå¯ä»¥çœ‹é”™è¯¯ä¿¡æ¯</p><h2 id="é”™è¯¯ä¿¡æ¯">é”™è¯¯ä¿¡æ¯</h2><ul><li>RX errors<br>è¡¨ç¤ºæ€»çš„æ”¶åŒ…çš„é”™è¯¯æ•°é‡ï¼Œè¿™åŒ…æ‹¬ too-long-frames é”™è¯¯ï¼ŒRing Buffer æº¢å‡ºé”™è¯¯ï¼Œcrc æ ¡éªŒé”™è¯¯ï¼Œå¸§åŒæ­¥é”™è¯¯ï¼Œfifo overruns ä»¥åŠ missed pkg ç­‰ç­‰</li><li>RX dropped<br>è¡¨ç¤ºæ•°æ®åŒ…å·²ç»è¿›å…¥äº† Ring Bufferï¼Œä½†æ˜¯ç”±äºå†…å­˜ä¸å¤Ÿç­‰ç³»ç»ŸåŸå› ï¼Œå¯¼è‡´åœ¨æ‹·è´åˆ°å†…å­˜çš„è¿‡ç¨‹ä¸­è¢«ä¸¢å¼ƒ</li><li>RX overruns<br>è¡¨ç¤ºäº† fifo çš„ overrunsï¼Œè¿™æ˜¯ç”±äº Ring Buffer(aka Driver Queue) ä¼ è¾“çš„ IO å¤§äº kernel èƒ½å¤Ÿå¤„ç†çš„ IO å¯¼è‡´çš„ï¼Œè€Œ Ring Buffer åˆ™æ˜¯æŒ‡åœ¨å‘èµ· IRQ è¯·æ±‚ä¹‹å‰çš„é‚£å— bufferã€‚å¾ˆæ˜æ˜¾ï¼Œoverruns çš„å¢å¤§æ„å‘³ç€æ•°æ®åŒ…æ²¡åˆ° Ring Buffer å°±è¢«ç½‘å¡ç‰©ç†å±‚ç»™ä¸¢å¼ƒäº†(å°±æ˜¯ring bufferæ»¡ä¹‹åå…ˆæœ‰dropæ”¶åˆ°çš„ï¼Œå†overrunæ²¡æ”¶çš„)ï¼Œè€Œ CPU æ— æ³•å³ä½¿çš„å¤„ç†ä¸­æ–­æ˜¯é€ æˆ Ring Buffer æ»¡çš„åŸå› ä¹‹ä¸€</li><li>RX frame<br>è¡¨ç¤º misaligned çš„ frames</li></ul><h2 id="rx-crc-errors">rx_crc_errors</h2><p>åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œå¢åŠ rx_crc_errorsçš„å€¼æ„å‘³ç€è¯¥é—®é¢˜å‡ºåœ¨ç½‘ç»œæ¨¡å‹çš„ç¬¬1å±‚ï¼Œå½“åœ¨æ¥å£ä¸Šæ¥æ”¶åˆ°æ•°æ®åŒ…æ—¶ï¼Œå®ƒå°†ç»å†æ•°æ®å®Œæ•´æ€§æ£€æŸ¥ï¼Œè¿™ç§°ä¸ºå¾ªç¯å†—ä½™æ£€æŸ¥ã€‚ å¦‚æœæ•°æ®åŒ…åœ¨è¯¥æ£€æŸ¥ä¸­å¤±è´¥ï¼Œåˆ™å°†å…¶æ ‡è®°ä¸ºrx_crc_errors<br>1.æ›´æ¢ç”µç¼†ã€‚<br>2.æ£€æŸ¥äº¤æ¢æœºé…ç½®ã€‚<br>3.æ›´æ¢ç½‘ç»œæ¥å£å¡ã€‚</p><h1>æŸ¥çœ‹ç½‘å¡</h1>]]></content>
    
    
    <summary type="html">æŸ¥çœ‹ç½‘å£ç”¨çš„</summary>
    
    
    
    <category term="linuxå‘½ä»¤" scheme="https://www.dddachui.top/categories/linux%E5%91%BD%E4%BB%A4/"/>
    
    
    <category term="linuxå‘½ä»¤" scheme="https://www.dddachui.top/tags/linux%E5%91%BD%E4%BB%A4/"/>
    
  </entry>
  
  <entry>
    <title>Linuxå¥½ç”¨å‘½ä»¤ä¹‹expect</title>
    <link href="https://www.dddachui.top/posts/a5a7ce3.html"/>
    <id>https://www.dddachui.top/posts/a5a7ce3.html</id>
    <published>2023-03-26T15:30:51.000Z</published>
    <updated>2023-03-26T10:40:20.644Z</updated>
    
    <content type="html"><![CDATA[<h1>ä½œç”¨</h1><p>äº¤äº’å¼è‡ªåŠ¨è¾“å…¥</p><h1>å®‰è£…</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y expect</span><br></pre></td></tr></table></figure><h1>ç®€å•ç¤ºä¾‹</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">cat expect.sh </span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/usr/bin/expec</span></span><br><span class="line">set timeout 20</span><br><span class="line">spawn ssh root@10.20.24.103</span><br><span class="line">expect &quot;root&quot;</span><br><span class="line">send &quot;paic1234\n&quot;</span><br><span class="line">interact</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">è‡ªåŠ¨åŒ–è„šæœ¬è¾“å…¥</summary>
    
    
    
    <category term="linuxå‘½ä»¤" scheme="https://www.dddachui.top/categories/linux%E5%91%BD%E4%BB%A4/"/>
    
    
    <category term="linuxå‘½ä»¤" scheme="https://www.dddachui.top/tags/linux%E5%91%BD%E4%BB%A4/"/>
    
  </entry>
  
  <entry>
    <title>Linuxå¥½ç”¨å‘½ä»¤ä¹‹nmcli</title>
    <link href="https://www.dddachui.top/posts/6ad86d1e.html"/>
    <id>https://www.dddachui.top/posts/6ad86d1e.html</id>
    <published>2023-03-26T15:30:51.000Z</published>
    <updated>2023-03-26T10:18:27.758Z</updated>
    
    <content type="html"><![CDATA[<h1>NetworkManager</h1><ol><li>NetworkManageræœåŠ¡æ˜¯ç®¡ç†å’Œç›‘æ§ç½‘ç»œè®¾ç½®çš„å®ˆæŠ¤è¿›ç¨‹,Centos7ä¹‹å‰çš„ç‰ˆæœ¬éƒ½æ˜¯é€šè¿‡network.serviceç®¡ç†ç½‘ç»œé…ç½®</li><li>åˆ°äº†Centos7å°±åŒæ—¶æ”¯æŒnetwork.serviceå’ŒNetworkManager.service</li><li>åœ¨RHEL 8/Centos 8ä¸Šå·²åºŸå¼ƒnetwork.serviceï¼ˆé»˜è®¤ä¸å®‰è£…ï¼‰,åªèƒ½é€šè¿‡NetworkManagerè¿›è¡Œç½‘ç»œé…ç½®ã€‚</li><li>NetworkManagerä¸»è¦ç®¡ç†2ä¸ªå¯¹è±¡ <code>Connection</code>ï¼ˆç½‘å¡è¿æ¥é…ç½®ï¼‰ å’Œ <code>Device</code>ï¼ˆç½‘å¡è®¾å¤‡ï¼‰,ä»–ä»¬ä¹‹é—´æ˜¯å¤šå¯¹ä¸€çš„å…³ç³»,ä½†æ˜¯åŒä¸€æ—¶åˆ»åªèƒ½æœ‰ä¸€ä¸ªConnectionå¯¹äºDeviceæ‰ç”Ÿæ•ˆ</li></ol><h1>å¯åŠ¨æ–¹æ³•</h1><p>å¯åŠ¨+å¼€æœºè‡ªå¯åŠ¨</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl enable --now NetworkManager</span><br></pre></td></tr></table></figure><h1>ä¸‰ç§æ–¹æ³•é…ç½®ç½‘ç»œ</h1><ol><li>é€šè¿‡nmcli connection addå‘½ä»¤é…ç½®,ä¼šè‡ªåŠ¨ç”Ÿæˆifcfgæ–‡ä»¶</li><li>æ‰‹åŠ¨é…ç½®ifcfgæ–‡ä»¶,é€šè¿‡nmcli connection reloadæ¥åŠ è½½ç”Ÿæ•ˆ</li><li>æ‰‹åŠ¨é…ç½®ifcfgæ–‡ä»¶,é€šè¿‡ä¼ ç»Ÿnetwork.serviceæ¥åŠ è½½ç”Ÿæ•ˆ</li></ol><h1>nmcliåŸºæ“</h1><p>NetworkManageråœ¨ç³»ç»Ÿä¸­çš„ç®¡ç†å·¥å…·ä¸ºnmcli,è¿™ä¸ªå‘½ä»¤<code>å˜å˜å¥½ç”¨</code></p><h2 id="æŸ¥çœ‹æ‰€æœ‰è¿æ¥">æŸ¥çœ‹æ‰€æœ‰è¿æ¥</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmcli connection show </span><br></pre></td></tr></table></figure><h2 id="æŸ¥çœ‹æ‰€æœ‰æ¿€æ´»çš„è¿æ¥">æŸ¥çœ‹æ‰€æœ‰æ¿€æ´»çš„è¿æ¥</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmcli connection show --active</span><br></pre></td></tr></table></figure><h2 id="æŸ¥çœ‹æŒ‡å®šçš„ç½‘å£çš„è¿æ¥">æŸ¥çœ‹æŒ‡å®šçš„ç½‘å£çš„è¿æ¥</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmcli connection show eth0</span><br></pre></td></tr></table></figure><h2 id="å…³é—­è¿æ¥">å…³é—­è¿æ¥</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmcli connection down eth0</span><br></pre></td></tr></table></figure><h2 id="å¯ç”¨è¿æ¥">å¯ç”¨è¿æ¥</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmcli connection up eth0</span><br></pre></td></tr></table></figure><h1>nmclié…ç½®ç½‘ç»œå®ä¾‹-dhcp</h1><h2 id="æ–°å¢è¿æ¥">æ–°å¢è¿æ¥</h2><ul><li>åˆ›å»ºä¸€ä¸ªè¿æ¥å<code>dachui</code>,ä½¿ç”¨ens33è®¾å¤‡</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmcli connection add con-name dachui type Ethernet ifname ens33</span><br></pre></td></tr></table></figure><h2 id="å±•ç¤ºåˆ›å»ºåçš„æ•ˆæœ">å±•ç¤ºåˆ›å»ºåçš„æ•ˆæœ</h2><p>(å®åœ¨ä¸æƒ³é…å›¾)<br>å¯ä»¥çœ‹å‡ºåªæœ‰ä¸€ä¸ªè¡Œ<code>NAME</code>æ˜¯ens33æ˜¯æ¿€æ´»çš„(å› ä¸ºæ¿€æ´»çš„è¿æ¥åœ¨ç»ˆç«¯æ˜¾ç¤ºç»¿è‰²,æˆ–è€…ç”¨â€“activeå¯ä»¥çœ‹å‡ºæ¥)</p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">NAME    UUID                                  TYPE      DEVICE </span><br><span class="line">ens33   c96bc909-188e-ec64-3a96-6a90982b08ad  ethernet  ens33  </span><br><span class="line">dachui  4b27c0d3-17d5-434b-90d1-5ac57a0f6147  ethernet  --     </span><br><span class="line">ens34   94aea789-efb3-ef4c-81b0-e8b18ecc9797  ethernet  -- </span><br></pre></td></tr></table></figure><h2 id="æŸ¥çœ‹dachuiçš„é…ç½®">æŸ¥çœ‹<code>dachui</code>çš„é…ç½®</h2><p>å¦‚æœä¸åŠ <code>grep</code>,ä»–ä¼šæ˜¾ç¤ºå¾ˆå¤šä¿¡æ¯,ä½†æˆ‘ä»¬åªéœ€è¦å…³æ³¨ipv4çš„ä¿¡æ¯</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmcli connection show dachui | grep ipv4</span><br></pre></td></tr></table></figure><h2 id="é…ç½®å±•ç¤º">é…ç½®å±•ç¤º</h2><p>å¯ä»¥çœ‹å‡ºç¬¬ä¸€è¡Œ<code>ipv4.method</code>çš„æ˜¯<code>auto</code>,ä»–ä»£è¡¨<code>dachui</code>è¿™ä¸ªè¿æ¥æ˜¯ç”¨<code>dhcp</code>çš„æ–¹å¼è·å–ipçš„</p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">ipv4.method:                            auto</span><br><span class="line">ipv4.dns:                               --</span><br><span class="line">ipv4.dns-search:                        --</span><br><span class="line">ipv4.dns-options:                       &quot;&quot;</span><br><span class="line">ipv4.dns-priority:                      0</span><br><span class="line">ipv4.addresses:                         --</span><br><span class="line">ipv4.gateway:                           --</span><br><span class="line">ipv4.routes:                            --</span><br><span class="line">ipv4.route-metric:                      -1</span><br><span class="line">ipv4.route-table:                       0 (unspec)</span><br><span class="line">ipv4.routing-rules:                     --</span><br><span class="line">ipv4.ignore-auto-routes:                å¦</span><br><span class="line">ipv4.ignore-auto-dns:                   å¦</span><br><span class="line">ipv4.dhcp-client-id:                    --</span><br><span class="line">ipv4.dhcp-timeout:                      0 (default)</span><br><span class="line">ipv4.dhcp-send-hostname:                æ˜¯</span><br><span class="line">ipv4.dhcp-hostname:                     --</span><br><span class="line">ipv4.dhcp-fqdn:                         --</span><br><span class="line">ipv4.never-default:                     å¦</span><br><span class="line">ipv4.may-fail:                          æ˜¯</span><br><span class="line">ipv4.dad-timeout:                       -1 (default)</span><br></pre></td></tr></table></figure><h2 id="æ¿€æ´»dhcp">æ¿€æ´»dhcp</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmcli con show ens33 | grep IP4</span><br></pre></td></tr></table></figure><ul><li>æ¿€æ´»çš„ç»“æœ<br>å¯ä»¥çœ‹å‡ºè¿™è¾¹ipv4çš„åœ°å€å·²ç»è‡ªåŠ¨è·å–äº†</li></ul><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">IP4.ADDRESS[1]:                         192.168.42.135/24</span><br><span class="line">IP4.GATEWAY:                            192.168.42.2</span><br><span class="line">IP4.ROUTE[1]:                           dst = 0.0.0.0/0, nh = 192.168.42.2, mt = 102</span><br><span class="line">IP4.ROUTE[2]:                           dst = 192.168.42.0/24, nh = 0.0.0.0, mt = 102</span><br><span class="line">IP4.DNS[1]:                             192.168.42.2</span><br><span class="line">IP4.DOMAIN[1]:                          localdomain</span><br></pre></td></tr></table></figure><h1>nmclié…ç½®ç½‘ç»œå®ä¾‹-static</h1><p>åˆšæ‰æ˜¯å±•ç¤ºçš„æ–°å¢ä¸€ä¸ªè¿æ¥,ä½¿ç”¨é»˜è®¤çš„<code>dhcp</code>æ–¹å¼é…ç½®ç½‘ç»œ,ä½†å®é™…é¡¹ç›®ä¸­éœ€è¦ä½¿ç”¨é™æ€ipçš„æ–¹å¼,é…ç½®é™æ€çš„æ‰‹æ®µæœ‰å¾ˆå¤š,å¯ä»¥å¯¹ç°åœ¨æœ‰<code>è¿æ¥</code>è¿›è¡Œç³»iuæ”¹,ä¹Ÿå¯ä»¥å†åˆ›å»ºä¸€ä¸ª<code>è¿æ¥</code>å¹¶ä¸”åŒæ—¶æŒ‡å®šä»–çš„ipåœ°å€</p><h2 id="ä¸€æ¬¡æ€§åˆ›å»º">ä¸€æ¬¡æ€§åˆ›å»º</h2><p>ä¹ä¸€çœ‹å‘½ä»¤<code>å˜å˜</code>é•¿,å…¶å®å¾ˆç®€å•</p><ul><li><code>å˜å˜</code>é•¿çš„å‘½ä»¤,å…¶å®å¯ä»¥æ›´é•¿</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmcli connection add con-name dachui-static type ethernet ifname ens33 ipv4.method manual ipv4.address 192.168.42.5/24 ipv4.gateway 192.168.42.2</span><br></pre></td></tr></table></figure><blockquote><p>æˆ‘æ‹†å¼€ä¸¤éƒ¨åˆ†åˆ†æ</p></blockquote><ol><li>åˆ›å»ºè¿æ¥,æŒ‡å®šæ¨¡å¼<br>è¿™è¾¹å°±æ˜¯åˆ›å»ºäº†<code>dahcui-static</code>çš„è¿æ¥,ä½¿ç”¨<code>type</code>æŒ‡å®šæ­¤è¿æ¥ä¸º<code>ethernet</code>(ä»¥å¤ªç½‘),å¹¶ä¸”è®¾å¤‡æ˜¯<code>ens33</code></li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmcli connection add con-name dachui-static type ethernet ifname ens33</span><br></pre></td></tr></table></figure><ol start="2"><li>é…ç½®ç½‘ç»œè¦ç´ <br>ä¸€ä¸ªipåœ°å€è‡³å°‘éœ€è¦æŒ‡å®šä¸€ä¸ª<code>ip</code>å’Œ<code>å­ç½‘æ©ç </code>æ‰å¯ä»¥ç”Ÿæ•ˆ,ç½‘å…³ä¹Ÿæ˜¯éœ€è¦é…ç½®çš„,è¿˜æœ‰æŒ‡å®šæ˜¯æ‰‹åŠ¨</li></ol><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">ipv4</span>.method manual ipv4.address <span class="number">192.168.42.5</span>/<span class="number">24</span> ipv4.gateway <span class="number">192.168.42.2</span></span><br></pre></td></tr></table></figure><ul><li>æ¿€æ´»è¿æ¥</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmcli connection up dachui-static</span><br></pre></td></tr></table></figure><ul><li>éªŒè¯</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmcli connection up dachui-static | grep IP4</span><br></pre></td></tr></table></figure><blockquote><p>è¾“å‡ºä¸ºä¸‹é¢çš„</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">IP4.ADDRESS[1]:                         192.168.42.5/24</span><br><span class="line">IP4.GATEWAY:                            192.168.42.2</span><br><span class="line">IP4.ROUTE[1]:                           dst = 0.0.0.0/0, nh = 192.168.42.2, mt = 102</span><br><span class="line">IP4.ROUTE[2]:                           dst = 192.168.42.0/24, nh = 0.0.0.0, mt = 102</span><br><span class="line">IP4.DNS[1]:                             192.168.42.2</span><br><span class="line">IP4.DOMAIN[1]:                          localdomain</span><br></pre></td></tr></table></figure><h2 id="ç¼–è¾‘è¿æ¥">ç¼–è¾‘è¿æ¥</h2><p>å¦‚æœä¹‹å‰æ˜¯åˆ›å»ºå¥½äº†å¤šä¸ªè¿æ¥,ä½†æ˜¯éœ€è¦ä¿®æ”¹,å¯ä»¥é€šè¿‡modifyçš„æ–¹æ³•</p><ul><li>æç¤ºä¸€ç‚¹<br>å¦‚æœè¦ä¿®æ”¹,è¯·çœ‹å¥½åŸå…ˆçš„<code>è¿æ¥</code>æ˜¯<code>è‡ªåŠ¨è·å–</code>è¿˜æ˜¯<code>æ‰‹åŠ¨è·å–</code>,å¦‚æœæ˜¯è‡ªåŠ¨,éœ€è¦æ”¹æ¨¡å¼</li></ul><blockquote><p>å¯ä»¥ä¸€å¹¶åŠ å…¥ä¿®æ”¹çš„,æˆ‘åªæ˜¯æ‹†å¼€æç¤ºä¸€ä¸‹,é‡åˆ°è¿‡ä¸€æ¬¡æ”¹äº†åŠå¤©æ²¡ç”Ÿæ•ˆ,ä¸€çœ‹è¿æ¥æ–¹å¼æ˜¯dhcp</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmcli connection modify dachui-static ipv4.method manual </span><br></pre></td></tr></table></figure><ul><li>ä¿®æ”¹ip<br>ä¹Ÿå¯ä»¥ä¿®æ”¹å…¶ä»–çš„,åœ¨è¾“å…¥<code>dachui-static</code>ä¹‹åæŒ‰<code>tap</code>ä¼šåˆ—ä¸¾å‡ºæ‰€æœ‰çš„<code>é…ç½®é¡¹</code>,ç„¶åæ ¹æ®è¯­æ³•ä¿®æ”¹</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmcli connection modify dachui-static ipv4.address 192.168.42.200/24</span><br></pre></td></tr></table></figure><ul><li>é‡å¯ç½‘å¡<br>ä¿®æ”¹ä¹‹åéœ€è¦æ¿€æ´»ä¸€ä¸‹æ‰èƒ½ç”Ÿæ•ˆ</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmcli connection up dachui-static</span><br></pre></td></tr></table></figure><blockquote><p>è¿™æ ·ä¸€ä¸ªåŸºæœ¬çš„nmlciåˆ›å»ºè¿æ¥å°±ç»“æŸäº†</p></blockquote><h1>å…¶ä»–åŸºæ“</h1><h2 id="å¢åŠ è·¯ç”±">å¢åŠ è·¯ç”±</h2><p>å†…ç½‘ç¯å¢ƒä¸‹,æœºå™¨å¯èƒ½æœ‰å¤šä¸ªç½‘æ®µ,é‚£ä¹ˆåŠ è·¯ç”±è‚¯å®šæ˜¯å¿…é¡»çš„,æ¯”å¦‚æˆ‘è¿™éœ€è¦è®¿é—®<code>10.10.10.0/24</code>çš„æœºå™¨,é‚£ä¹ˆé€šè¿‡å¦‚ä¸‹æ–¹æ³•è¿›è¡Œé…ç½®</p><ul><li>åŠ è·¯ç”±</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmcli connection modify dachui-static +ipv4.routes &quot;10.10.10.0/24 192.168.42.2&quot;</span><br></pre></td></tr></table></figure><ul><li>æ¿€æ´»çœ‹ä¿¡æ¯</li></ul><ol><li>é…ç½®ä¿¡æ¯</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">IP4.ROUTE[5]:                           dst = 10.10.10.0/24, nh = 192.168.42.2, mt = 102</span><br></pre></td></tr></table></figure><ol start="2"><li>è·¯ç”±ä¿¡æ¯</li></ol><ul><li>routeå±•ç¤º</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">route -n</span><br></pre></td></tr></table></figure><ul><li>è¾“å‡ºç»“æœ</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Destination     Gateway         Genmask         Flags Metric Ref    Use Iface</span><br><span class="line">0.0.0.0         192.168.42.2    0.0.0.0         UG    102    0        0 ens33</span><br><span class="line">10.10.10.0      192.168.42.2    255.255.255.0   UG    102    0        0 ens33</span><br></pre></td></tr></table></figure><h2 id="åˆ é™¤è·¯ç”±">åˆ é™¤è·¯ç”±</h2><p>å­¦ä¼šå¢åŠ ,ä¹Ÿè¦å­¦ä¼šåˆ é™¤</p><ul><li><code>ä¹ä¸€çœ‹</code>æ˜¯ä¸æ˜¯ä¸€æ ·çš„?å…¶å®å°†<code>+</code>æ”¹æˆ<code>-</code>,ç„¶å<code>é‡æ–°æ¿€æ´»</code>å°±å¯ä»¥äº†</li></ul><blockquote><p>æ‰€ä»¥ä¿®æ”¹çš„é€»è¾‘å¾ˆç®€å•çš„,<code>+</code>å°±å¢åŠ ,<code>-</code>å°±æ˜¯åˆ é™¤,<code>ä»€ä¹ˆéƒ½ä¸åŠ </code>å°±æ˜¯ä¿®æ”¹</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmcli connection modify dachui-static -ipv4.routes &quot;10.10.10.0/24 192.168.42.2&quot;</span><br></pre></td></tr></table></figure><h2 id="å¢åŠ ip">å¢åŠ ip</h2><p>æœ‰æ—¶å€™éœ€è¦åœ¨ä¸€ä¸ªè¿æ¥ä¸ŠåŠ å¤šä¸ªipåœ°å€</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmcli connection modify dachui-static +ipv4.addresses 2.2.2.2/16</span><br></pre></td></tr></table></figure><h2 id="åˆ é™¤è¿æ¥">åˆ é™¤è¿æ¥</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmcli connection delete dachui-static</span><br></pre></td></tr></table></figure><h2 id="ç½‘å¡å¼€æœºè‡ªå¯åŠ¨">ç½‘å¡å¼€æœºè‡ªå¯åŠ¨</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmcli connection modify dachui-static autoconnect yes</span><br></pre></td></tr></table></figure><h1>nmtui</h1><p>å…¶å®nmcliçš„ç©æ³•æœ‰å¾ˆå¤š,ä½†å…¶å®è¿˜æœ‰ä¸€ä¸ªå·¥å…·<code>nmtui</code>,ä»–æ˜¯<code>NetworkManager-tui</code>çš„ä¸€ä¸ªå·¥å…·,é€šè¿‡å­—ç¬¦å›¾å½¢åŒ–é…ç½®ç½‘ç»œ</p>]]></content>
    
    
    <summary type="html">é…ç½®ç½‘ç»œå·¥å…·</summary>
    
    
    
    <category term="linuxå‘½ä»¤" scheme="https://www.dddachui.top/categories/linux%E5%91%BD%E4%BB%A4/"/>
    
    
    <category term="linuxå‘½ä»¤" scheme="https://www.dddachui.top/tags/linux%E5%91%BD%E4%BB%A4/"/>
    
  </entry>
  
  <entry>
    <title>Linuxå¥½ç”¨å‘½ä»¤ä¹‹systemctl</title>
    <link href="https://www.dddachui.top/posts/5154c07a.html"/>
    <id>https://www.dddachui.top/posts/5154c07a.html</id>
    <published>2023-03-26T15:30:51.000Z</published>
    <updated>2023-03-26T10:18:22.615Z</updated>
    
    <content type="html"><![CDATA[<h1>systemd</h1><p>æ˜¯ä¸€ä¸ªç”¨äºlinuxçš„ç³»ç»Ÿä¸æœåŠ¡ç®¡ç†å™¨ï¼Œå†…æ ¸å¯åŠ¨åæ‹‰èµ·çš„ç¬¬ä¸€ä¸ªè¿›ç¨‹ï¼Œå³initè¿›ç¨‹ï¼ˆç”¨æˆ·ç©ºé—´1å·è¿›ç¨‹ï¼‰ï¼Œå¯åŠ¨å’Œç»´æŠ¤å„ç§ç”¨æˆ·å¼€æœºçš„æœåŠ¡</p><h2 id="æŸ¥çœ‹ç³»ç»Ÿsystemdçš„serviceæƒ…å†µ">æŸ¥çœ‹ç³»ç»Ÿsystemdçš„serviceæƒ…å†µ</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl list-units --type service</span><br></pre></td></tr></table></figure><h2 id="è§£æsystemdå¯åŠ¨è¿‡ç¨‹ä¸­çš„æ€§èƒ½æ•°æ®">è§£æsystemdå¯åŠ¨è¿‡ç¨‹ä¸­çš„æ€§èƒ½æ•°æ®</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">systemd-analyze #ç³»ç»Ÿå¯åŠ¨æ—¶é—´æ€»è§ˆ</span><br><span class="line">systemd-analyze plot &gt; p.svg#ç”Ÿæˆplotå›¾</span><br><span class="line">systemd-analyze critical-chain  xxx.service #æŸæœåŠ¡ä¾èµ–å…³ç³»ä¸­è€—æ—¶æœ€é•¿çš„é“¾æ¡</span><br></pre></td></tr></table></figure><h1>systemctl</h1><h2 id="æŸ¥çœ‹ç³»ç»Ÿå•å…ƒ">æŸ¥çœ‹ç³»ç»Ÿå•å…ƒ</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl</span><br><span class="line">systemctl  list-units</span><br></pre></td></tr></table></figure><h2 id="æŸ¥çœ‹è¿è¡Œå¤±è´¥çš„å•å…ƒ">æŸ¥çœ‹è¿è¡Œå¤±è´¥çš„å•å…ƒ</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl --failed</span><br></pre></td></tr></table></figure><h2 id="æŸ¥çœ‹ç³»ç»Ÿä¸­å®‰è£…çš„æœåŠ¡">æŸ¥çœ‹ç³»ç»Ÿä¸­å®‰è£…çš„æœåŠ¡</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl list-unit-files</span><br></pre></td></tr></table></figure><h2 id="å¯åœæŸ¥">å¯åœæŸ¥</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">systemctl start httpd</span><br><span class="line">systemctl stop httpd</span><br><span class="line">systemctl status httpd</span><br></pre></td></tr></table></figure><h2 id="è®¾ç½®å¯åŠ¨æ¨¡å¼-å›¾å½¢-å‘½ä»¤è¡Œ">è®¾ç½®å¯åŠ¨æ¨¡å¼(å›¾å½¢/å‘½ä»¤è¡Œ)</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">systemctl get-default</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">å¼€æœºå¯åŠ¨å›¾å½¢ç•Œé¢</span></span><br><span class="line">systemctl set-default graphical.target</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">å­—ç¬¦ç•Œé¢æ¨¡å¼</span></span><br><span class="line">systemctl set-default multi-user.target</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">æœåŠ¡ç®¡ç†</summary>
    
    
    
    <category term="linuxå‘½ä»¤" scheme="https://www.dddachui.top/categories/linux%E5%91%BD%E4%BB%A4/"/>
    
    
    <category term="linuxå‘½ä»¤" scheme="https://www.dddachui.top/tags/linux%E5%91%BD%E4%BB%A4/"/>
    
  </entry>
  
  <entry>
    <title>shellç¼–ç¨‹</title>
    <link href="https://www.dddachui.top/posts/e5954c2f.html"/>
    <id>https://www.dddachui.top/posts/e5954c2f.html</id>
    <published>2023-03-26T11:47:42.000Z</published>
    <updated>2023-03-26T11:53:08.775Z</updated>
    
    <content type="html"><![CDATA[<h2 id="1-ç»ˆç«¯æ‰“å°">1.ç»ˆç«¯æ‰“å°</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">1.è¾“å‡ºç‰¹æ®Šç¬¦å·éœ€è¦è½¬ä¹‰</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">2.ä½¿ç”¨<span class="built_in">printf</span>å¸¦æ ¼å¼è¾“å‡º</span></span><br><span class="line">printf &quot;%-5s %-10s %-4s\n&quot; No Name Mark</span><br><span class="line">printf &quot;%-5s %-10s %-4.2f\n&quot; 1 Sarath 80.3456</span><br><span class="line">printf &quot;%-5s %-10s %-4.2f\n&quot; 2 James 90.9989</span><br><span class="line">printf &quot;%-5s %-10s %-4.2f\n&quot; 3 Jeff 77.564</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">3.è¾“å‡ºé¢œè‰²</span></span><br><span class="line">å­—ä½“é¢œè‰²:é‡ç½®=0ï¼Œé»‘è‰²=30ï¼Œçº¢è‰²=31ï¼Œç»¿è‰²=32ï¼Œé»„è‰²=33ï¼Œè“</span><br><span class="line">è‰²=34ï¼Œæ´‹çº¢=35ï¼Œé’è‰²=36ï¼Œç™½è‰²=37</span><br><span class="line">åº•è‰²:é‡ç½®=0ï¼Œé»‘è‰²=40ï¼Œçº¢è‰²=41ï¼Œç»¿è‰²=42ï¼Œé»„è‰²=43ï¼Œ</span><br><span class="line">è“è‰²=44ï¼Œæ´‹çº¢=45ï¼Œé’è‰²=46ï¼Œç™½è‰²=47</span><br><span class="line">echo -e &quot;\e[1;31m This is red text \e[0m&quot;</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">1.æŸ¥çœ‹è¿™ä¸ªè¿›ç¨‹çš„å˜é‡</span></span><br><span class="line">cat /proc/$(pgrep java)/environ | tr &#x27;\0&#x27; &#x27;\n&#x27;</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">pgrep java     æŸ¥çœ‹javaè¿›ç¨‹çš„pid</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="built_in">tr</span> <span class="string">&#x27;\0&#x27;</span> <span class="string">&#x27;\n&#x27;</span>   æ ¼å¼åŒ–è¾“å‡º</span></span><br></pre></td></tr></table></figure><h2 id="2-ç¯å¢ƒå˜é‡">2.ç¯å¢ƒå˜é‡</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">var=value ##å˜é‡èµ‹å€¼ï¼Œæ²¡æœ‰ç©ºæ ¼</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">1.è¾“å‡ºå˜é‡</span></span><br><span class="line">echo $(var)  #$()è¿™ä¸ªå¯ä»¥çœç•¥ï¼Œä½†ä¸ºäº†æ›´å¥½çš„æ˜¾ç¤ºå»ºè®®åŠ </span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">2.å˜é‡é•¿åº¦</span></span><br><span class="line"><span class="meta prompt_">echo$</span><span class="language-bash">&#123;<span class="comment">#var&#125;</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">3.è¾“å‡ºå½“å‰ç”¨çš„å“ªç§shell</span></span><br><span class="line">echo $SHELL</span><br><span class="line">echo $0</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">4.æ£€æŸ¥æ˜¯å¦æ˜¯è¶…æˆ·</span></span><br><span class="line">if [ $UID -ne 0 ]; then</span><br><span class="line">echo Non root user. Please run as root.</span><br><span class="line">else</span><br><span class="line">echo Root user</span><br><span class="line">fi</span><br></pre></td></tr></table></figure><h2 id="3-ä½¿ç”¨å‡½æ•°æ·»åŠ å˜é‡">3.ä½¿ç”¨å‡½æ•°æ·»åŠ å˜é‡</h2><h2 id="4-shellçš„æ•°å­¦è¿ç®—">4.shellçš„æ•°å­¦è¿ç®—</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">æ³•1ï¼šå®šä¹‰çš„æ˜¯å­—ç¬¦ä¸²ï¼Œä½¿ç”¨<span class="built_in">let</span>ç›´æ¥è®¡ç®—</span></span><br><span class="line">no1=4</span><br><span class="line">no2=5</span><br><span class="line">let result=no1+no2</span><br><span class="line">echo $result</span><br><span class="line">let no1++</span><br><span class="line">let no1--</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">æ³•2ï¼šæ“ä½œç¬¦[]</span></span><br><span class="line">result=$[ no1 + no2 ]</span><br><span class="line">result=$[ $no1 + no2 ]</span><br></pre></td></tr></table></figure><h2 id="5-æ–‡ä»¶æè¿°ç¬¦å’Œé‡å®šå‘">5.æ–‡ä»¶æè¿°ç¬¦å’Œé‡å®šå‘</h2><p>0 â€”â€” stdinï¼ˆæ ‡å‡†è¾“å…¥ï¼‰<br>1 â€”â€” stdoutï¼ˆæ ‡å‡†è¾“å‡ºï¼‰<br>2 â€”â€” stderrï¼ˆæ ‡å‡†é”™è¯¯ï¼‰</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">å°†é”™è¯¯å’Œæ­£ç¡®åˆ†åˆ«å†™è¿›æ–‡ä»¶</span></span><br><span class="line">cat a1 Â  2&gt; stderr.txt Â  1&gt; stdout.txt</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å°†å‘½ä»¤çš„æŠ¥é”™ä¸¢å¼ƒ</span></span><br><span class="line">cat 1 2&gt;/dev/null</span><br></pre></td></tr></table></figure><h2 id="6-åˆ«åalias">6.åˆ«åalias</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">alias ifconfig=&#x27;ip a | grep ens&#x27;</span><br><span class="line">ifconfig</span><br></pre></td></tr></table></figure><h2 id="7-æ—¶é—´">7.æ—¶é—´</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">date --date &quot;Jan 20 2001&quot; +%A</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">æ˜ŸæœŸ</span> </span><br><span class="line"><span class="meta prompt_">%</span><span class="language-bash">aï¼ˆä¾‹å¦‚ï¼šSatï¼‰</span></span><br><span class="line"><span class="meta prompt_">%</span><span class="language-bash">Aï¼ˆä¾‹å¦‚ï¼šSaturday</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">æœˆ</span> </span><br><span class="line"><span class="meta prompt_">%</span><span class="language-bash">bï¼ˆä¾‹å¦‚ï¼šNovï¼‰</span></span><br><span class="line"><span class="meta prompt_">%</span><span class="language-bash">Bï¼ˆä¾‹å¦‚ï¼šNovemberï¼‰</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">æ—¥</span>       </span><br><span class="line"><span class="meta prompt_">%</span><span class="language-bash">dï¼ˆä¾‹å¦‚ï¼š31ï¼‰</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">å›ºå®šæ ¼å¼æ—¥æœŸï¼ˆmm/dd/yyï¼‰</span>   </span><br><span class="line"><span class="meta prompt_">%</span><span class="language-bash">Dï¼ˆä¾‹å¦‚ï¼š10/18/10ï¼‰</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">å¹´</span></span><br><span class="line"><span class="meta prompt_">%</span><span class="language-bash">yï¼ˆä¾‹å¦‚ï¼š10ï¼‰</span></span><br><span class="line"><span class="meta prompt_">%</span><span class="language-bash">Yï¼ˆä¾‹å¦‚ï¼š2010ï¼‰</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">å°æ—¶</span></span><br><span class="line"><span class="meta prompt_">%</span><span class="language-bash">Iæˆ–%Hï¼ˆä¾‹å¦‚ï¼š08ï¼‰</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">åˆ†é’Ÿ</span></span><br><span class="line"><span class="meta prompt_">%</span><span class="language-bash">Mï¼ˆä¾‹å¦‚ï¼š33ï¼‰</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">ç§’</span></span><br><span class="line"><span class="meta prompt_">%</span><span class="language-bash">Sï¼ˆä¾‹å¦‚ï¼š10ï¼‰</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">çº³ç§’</span></span><br><span class="line"><span class="meta prompt_">%</span><span class="language-bash">Nï¼ˆä¾‹å¦‚ï¼š695208515ï¼‰</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">Unixçºªå…ƒæ—¶ï¼ˆä»¥ç§’ä¸ºå•ä½ï¼‰</span></span><br><span class="line"><span class="meta prompt_">%</span><span class="language-bash">sï¼ˆä¾‹å¦‚ï¼š1290049486ï¼‰</span></span><br></pre></td></tr></table></figure><h2 id="8-shellçš„è°ƒè¯•">8.shellçš„è°ƒè¯•</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">1.ä½¿ç”¨vscodeè¿œç¨‹è°ƒè¯•</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">2.bash -x a.sh</span></span><br></pre></td></tr></table></figure><h2 id="9-å‡½æ•°">9.å‡½æ•°</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">1.1å®šä¹‰æ–¹å¼a</span></span><br><span class="line">function fname()</span><br><span class="line">&#123;</span><br><span class="line">statements;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">1.2.å®šä¹‰æ–¹å¼b</span></span><br><span class="line">fname()</span><br><span class="line">&#123;</span><br><span class="line">statements;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">2.ä½¿ç”¨æ–¹å¼</span></span><br><span class="line">fname #åªéœ€è¦ä½¿ç”¨å‡½æ•°å</span><br><span class="line">fname argv1 argv2 #ä¼ å‚æ•°</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">3.å‡½æ•°è¿”å›å€¼</span></span><br><span class="line">echo $? #è¾“å‡ºå‡½æ•°è¿”å›å€¼</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">4.1å®ä¾‹a</span></span><br><span class="line">fname()</span><br><span class="line">&#123;</span><br><span class="line">echo $1, $2; #è®¿é—®å‚æ•°1å’Œå‚æ•°2  $nå°±æ˜¯ç¬¬nä¸ªå‚æ•°</span><br><span class="line">echo &quot;$@&quot;;#æ‰€æœ‰å‚æ•°</span><br><span class="line">echo &quot;$*&quot;; #ç±»ä¼¼äº$@ï¼Œä½†æ˜¯å‚æ•°è¢«ä½œä¸ºå•ä¸ªå®ä½“</span><br><span class="line">return 0; #è¿”å›å€¼</span><br><span class="line">&#125;</span><br><span class="line">fname 1 2</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">4.2å®ä¾‹b</span></span><br><span class="line">CMD=&quot;ifconfig&quot; #commandæŒ‡ä»£ä½ è¦æ£€æµ‹é€€å‡ºçŠ¶æ€çš„ç›®æ ‡å‘½ä»¤</span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">CMD &gt; /dev/null</span></span><br><span class="line">if [ $? -eq 0 ];</span><br><span class="line">then</span><br><span class="line">echo &quot;$CMD executed successfully&quot;</span><br><span class="line">else</span><br><span class="line">echo &quot;$CMD terminated unsuccessfully&quot;</span><br><span class="line">fi</span><br></pre></td></tr></table></figure><h2 id="10-å°†å‘½ä»¤åºåˆ—çš„è¾“å‡ºè¯»å…¥å˜é‡">10.å°†å‘½ä»¤åºåˆ—çš„è¾“å‡ºè¯»å…¥å˜é‡</h2><h2 id="11-readè¯»å…¥è¾“å…¥å€¼">11.readè¯»å…¥è¾“å…¥å€¼</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">read -p &quot;Enter input:&quot; var #æ˜¾ç¤ºæç¤ºä¿¡æ¯</span><br><span class="line">read -s var   #ç”¨æ— å›æ˜¾çš„æ–¹å¼è¯»å–å¯†ç </span><br></pre></td></tr></table></figure><h2 id="12-å­—æ®µåˆ†éš”ç¬¦å’Œè¿­ä»£å™¨">12.å­—æ®µåˆ†éš”ç¬¦å’Œè¿­ä»£å™¨</h2><h2 id="13-ifâ€¦else">13.ifâ€¦else</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">#1.if..else</span></span></span><br><span class="line">if condition;</span><br><span class="line">then</span><br><span class="line">commands;</span><br><span class="line">fi</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">#1.if..else if..else</span></span></span><br><span class="line">if condition;</span><br><span class="line">then</span><br><span class="line">commands;</span><br><span class="line">else if condition; then</span><br><span class="line">commands;</span><br><span class="line">else</span><br><span class="line">commands;</span><br><span class="line">fi</span><br></pre></td></tr></table></figure><h2 id="14-æ¯”è¾ƒæµ‹è¯•">14.æ¯”è¾ƒæµ‹è¯•</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">1.è®¡ç®—æ¡ä»¶</span></span><br><span class="line">[ $var -eq 0 ] #å½“ $var ç­‰äº 0 æ—¶ï¼Œè¿”å›çœŸ</span><br><span class="line">[ $var -ne 0 ] #å½“ $var ä¸ºé 0 æ—¶ï¼Œè¿”å›çœŸ</span><br><span class="line">-eqï¼šç­‰äº</span><br><span class="line">-neï¼šä¸ç­‰äº</span><br><span class="line">-gtï¼šå¤§äº</span><br><span class="line">-ltï¼šå°äº</span><br><span class="line">-geï¼šå¤§äºæˆ–ç­‰äº</span><br><span class="line">-leï¼šå°äºæˆ–ç­‰äº</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">2.æ–‡ä»¶ç³»ç»Ÿæ¡ä»¶</span></span><br><span class="line">fpath=&quot;/etc/passwd&quot;</span><br><span class="line">if [ -e $fpath ]; then</span><br><span class="line">echo File exists;</span><br><span class="line">else</span><br><span class="line">echo Does not exist;</span><br><span class="line">fi</span><br><span class="line">[ -f $var ]ï¼šå¦‚æœç»™å®šçš„å˜é‡åŒ…å«æ­£å¸¸çš„æ–‡ä»¶è·¯å¾„æˆ–æ–‡ä»¶åï¼Œåˆ™è¿”å›çœŸã€‚</span><br><span class="line">[ -x $var ]ï¼šå¦‚æœç»™å®šçš„å˜é‡åŒ…å«çš„æ–‡ä»¶å¯æ‰§è¡Œï¼Œåˆ™è¿”å›çœŸã€‚</span><br><span class="line">[ -d $var ]ï¼šå¦‚æœç»™å®šçš„å˜é‡åŒ…å«çš„æ˜¯ç›®å½•ï¼Œåˆ™è¿”å›çœŸã€‚</span><br><span class="line">[ -e $var ]ï¼šå¦‚æœç»™å®šçš„å˜é‡åŒ…å«çš„æ–‡ä»¶å­˜åœ¨ï¼Œåˆ™è¿”å›çœŸã€‚</span><br><span class="line">[ -c $var ]ï¼šå¦‚æœç»™å®šçš„å˜é‡åŒ…å«çš„æ˜¯ä¸€ä¸ªå­—ç¬¦è®¾å¤‡æ–‡ä»¶çš„è·¯å¾„ï¼Œåˆ™è¿”å›çœŸã€‚</span><br><span class="line">[ -b $var ]ï¼šå¦‚æœç»™å®šçš„å˜é‡åŒ…å«çš„æ˜¯ä¸€ä¸ªå—è®¾å¤‡æ–‡ä»¶çš„è·¯å¾„ï¼Œåˆ™è¿”å›çœŸã€‚</span><br><span class="line">[ -w $var ]ï¼šå¦‚æœç»™å®šçš„å˜é‡åŒ…å«çš„æ–‡ä»¶å¯å†™ï¼Œåˆ™è¿”å›çœŸã€‚</span><br><span class="line">[ -r $var ]ï¼šå¦‚æœç»™å®šçš„å˜é‡åŒ…å«çš„æ–‡ä»¶å¯è¯»ï¼Œåˆ™è¿”å›çœŸã€‚</span><br><span class="line">[ -L $var ]ï¼šå¦‚æœç»™å®šçš„å˜é‡åŒ…å«çš„æ˜¯ä¸€ä¸ªç¬¦å·é“¾æ¥ï¼Œåˆ™è¿”å›çœŸã€‚</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">3.å­—ç¬¦ä¸²æ¯”è¾ƒ</span></span><br><span class="line">[[ $str1 = $str2 ]]</span><br><span class="line">[[ $str1 == $str2 ]]</span><br><span class="line">[[ $str1 != $str2 ]]</span><br><span class="line">[[ $str1 &gt; $str2 ]] #å¦‚æœstr1çš„å­—æ¯åºæ¯”str2å¤§ï¼Œåˆ™è¿”å›çœŸ</span><br><span class="line">[[ -z $str1 ]]ï¼šå¦‚æœstr1åŒ…å«çš„æ˜¯ç©ºå­—ç¬¦ä¸²ï¼Œåˆ™è¿”å›çœŸã€‚</span><br><span class="line">[[ -n $str1 ]]ï¼šå¦‚æœstr1åŒ…å«çš„æ˜¯éç©ºå­—ç¬¦ä¸²ï¼Œåˆ™è¿”å›çœŸã€‚</span><br></pre></td></tr></table></figure><h2 id="15-å‘½ä»¤">15.å‘½ä»¤</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">1.<span class="built_in">cat</span></span> </span><br><span class="line">cat -n a.txt #æ˜¾ç¤ºè¡Œå·</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">2.xargs</span></span><br><span class="line">command | xargs#æ¥æ”¶åˆ°çš„æ•°æ®é‡æ–°æ ¼å¼åŒ–</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">3.<span class="built_in">tr</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">4.<span class="built_in">md5sum</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">5.åŠ å¯†æŒ‡ä»¤</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">6.æ’åº</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">7.ä¸´æ—¶æ–‡ä»¶å</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">8.åˆ†éš”æ–‡ä»¶</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">9.æ‰¹é‡é‡å‘½å</span></span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">10.ç”Ÿæˆæ–‡ä»¶</span></span><br><span class="line">dd if=/dev/zero of=junk.data bs=1M count=1#bsä»£è¡¨ä»¥å­—èŠ‚ä¸ºå•ä½çš„å—å¤§å°ï¼ˆblock sizeï¼‰ï¼Œcountä»£è¡¨éœ€è¦è¢«</span><br><span class="line">å¤åˆ¶çš„å—æ•°</span><br><span class="line">https://www.cnblogs.com/licheng/archive/2008/03/21/1116492.htm</span><br></pre></td></tr></table></figure><h2 id="16-æ–‡æœ¬æ–‡ä»¶çš„äº¤é›†ä¸å·®é›†">16.æ–‡æœ¬æ–‡ä»¶çš„äº¤é›†ä¸å·®é›†</h2><h2 id="17-æŸ¥æ‰¾å¹¶åˆ é™¤é‡å¤æ–‡ä»¶">17.æŸ¥æ‰¾å¹¶åˆ é™¤é‡å¤æ–‡ä»¶</h2><h2 id="18-æ–‡ä»¶æƒé™ã€æ‰€æœ‰æƒå’Œç²˜æ»ä½">18.æ–‡ä»¶æƒé™ã€æ‰€æœ‰æƒå’Œç²˜æ»ä½</h2><h2 id="19-åˆ›å»ºä¸å¯ä¿®æ”¹çš„æ–‡ä»¶">19.åˆ›å»ºä¸å¯ä¿®æ”¹çš„æ–‡ä»¶</h2><h2 id="20-æ‰¹é‡ç”Ÿæˆç©ºç™½æ–‡ä»¶">20.æ‰¹é‡ç”Ÿæˆç©ºç™½æ–‡ä»¶</h2><h2 id="21-æŸ¥æ‰¾ç¬¦å·é“¾æ¥åŠå…¶æŒ‡å‘ç›®æ ‡">21.æŸ¥æ‰¾ç¬¦å·é“¾æ¥åŠå…¶æŒ‡å‘ç›®æ ‡</h2><h2 id="22-åˆ—ä¸¾æ–‡ä»¶ç±»å‹ç»Ÿè®¡ä¿¡æ¯">22.åˆ—ä¸¾æ–‡ä»¶ç±»å‹ç»Ÿè®¡ä¿¡æ¯</h2><h2 id="23-ä½¿ç”¨ç¯å›æ–‡ä»¶">23.ä½¿ç”¨ç¯å›æ–‡ä»¶</h2><h2 id="24-ç”Ÿæˆ-ISO-æ–‡ä»¶åŠæ··åˆå‹-ISO">24.ç”Ÿæˆ ISO æ–‡ä»¶åŠæ··åˆå‹ ISO</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">1.åˆ¶ä½œiso</span></span><br><span class="line">cat /dev/cdrom &gt; image.iso     #ä¸å¥½</span><br><span class="line">dd if=/dev/cdrom of=image.iso  #æœ€å¥½çš„æ–¹æ³•</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">mkisofså‘½ä»¤ç”¨äºåˆ›å»ºISOæ–‡ä»¶ç³»ç»Ÿã€‚å¯ä»¥ç”¨cdrecordä¹‹ç±»çš„å·¥å…·å°†mkisofsçš„è¾“å‡ºæ–‡ä»¶ç›´æ¥åˆ»å½•åˆ°CD-ROMæˆ–DVD-ROMä¸Š</span></span><br><span class="line">mkisofs -V &quot;Label&quot; -o image.iso source_dir/</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">2.isohybrid</span></span><br><span class="line">isohybrid image.iso</span><br><span class="line">dd if=image.iso of=/dev/sdb1</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">3.ç”¨å‘½ä»¤è¡Œåˆ»å½•ISO</span></span><br><span class="line">cdrecord -v dev=/dev/cdrom image.iso -speed 8</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">4.æ“ä½œå…‰é©±å™¨</span></span><br><span class="line">eject  #å¼¹å¼€</span><br><span class="line">eject -t ##åˆä¸Š</span><br></pre></td></tr></table></figure><h1>25.ç»Ÿè®¡æ–‡ä»¶çš„è¡Œæ•°ã€å•è¯æ•°å’Œå­—ç¬¦æ•°</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">1.ç»Ÿè®¡è¡Œæ•°</span></span><br><span class="line">wc -l file</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">2.ç»Ÿè®¡å•è¯æ•°</span></span><br><span class="line">wc -w file</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">3.ç»Ÿè®¡å­—ç¬¦æ•°</span></span><br><span class="line">wc -c file</span><br><span class="line">echo -n 1234 | wc -c #-nç”¨äºé¿å…echoæ·»åŠ é¢å¤–çš„æ¢è¡Œç¬¦</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">4.ä¸åŠ å‚æ•°</span></span><br><span class="line">wc file #æ–‡ä»¶çš„è¡Œæ•°ã€å•è¯æ•°å’Œå­—ç¬¦æ•°</span><br></pre></td></tr></table></figure><h1>26.treeç›®å½•</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">1.è¾“å‡ºç¬¦åˆç±»å‹çš„æ–‡ä»¶</span></span><br><span class="line">tree /opt -P &quot;*.sh&quot;</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">2.æ‰“å°ç›®å½•æ ‘å’Œå¤§å°</span></span><br><span class="line">tree -h</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">treeå‘½ä»¤å¯ä»¥ç”ŸæˆHTMLè¾“å‡º</span></span><br><span class="line">tree PATH -H http://localhost -o out.html</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">æè¿°</summary>
    
    
    
    <category term="çŸ¥è¯†ç‚¹" scheme="https://www.dddachui.top/categories/%E7%9F%A5%E8%AF%86%E7%82%B9/"/>
    
    
    <category term="shell" scheme="https://www.dddachui.top/tags/shell/"/>
    
  </entry>
  
  <entry>
    <title>perlè¿‡æ»¤macåœ°å€</title>
    <link href="https://www.dddachui.top/posts/56f58a69.html"/>
    <id>https://www.dddachui.top/posts/56f58a69.html</id>
    <published>2023-03-26T11:47:30.000Z</published>
    <updated>2023-03-26T11:52:41.744Z</updated>
    
    <content type="html"><![CDATA[<ul><li>ä¸‹è½½åŒ…</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://cpan.metacpan.org/authors/id/A/AB/ABIGAIL/Regexp-Common-2017060201.tar.gz</span><br></pre></td></tr></table></figure><ul><li>å®‰è£…åŒ…</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">tar xf Regexp-Common-2017060201.tar.gz </span><br><span class="line">cd Regexp-Common-2017060201/</span><br><span class="line">perl Makefile.PL</span><br><span class="line">make install</span><br></pre></td></tr></table></figure><ul><li>è¿‡æ»¤æŒ‡å®šç½‘å£macåœ°å€</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ifconfig eth0 |perl -MRegexp::Common=net -lnE &#x27;say $&amp; if /$RE&#123;net&#125;&#123;MAC&#125;/g&#x27;</span><br></pre></td></tr></table></figure><ul><li>è¿‡æ»¤æŒ‡å®šç½‘å¡IPv4</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ifconfig eth1 |perl -MRegexp::Common=net -lnE &#x27;say $&amp; if /$RE&#123;net&#125;&#123;IPv4&#125;/g&#x27;</span><br></pre></td></tr></table></figure><ul><li>è¿‡æ»¤æŒ‡å®šç½‘å¡IPv6</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ifconfig eth1 |perl -MRegexp::Common=net -lnE &#x27;say $&amp; if /$RE&#123;net&#125;&#123;IPv6&#125;/g&#x27;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">æè¿°</summary>
    
    
    
    <category term="çŸ¥è¯†ç‚¹" scheme="https://www.dddachui.top/categories/%E7%9F%A5%E8%AF%86%E7%82%B9/"/>
    
    
    <category term="åŸºæ“" scheme="https://www.dddachui.top/tags/%E5%9F%BA%E6%93%8D/"/>
    
  </entry>
  
  <entry>
    <title>nfsæ­å»º</title>
    <link href="https://www.dddachui.top/posts/941a0cef.html"/>
    <id>https://www.dddachui.top/posts/941a0cef.html</id>
    <published>2023-03-26T11:47:06.000Z</published>
    <updated>2023-03-26T11:52:18.995Z</updated>
    
    <content type="html"><![CDATA[<h1>ç¯å¢ƒ</h1><ul><li>èŠ‚ç‚¹server,å……å½“nfsæœåŠ¡ç«¯,ipæ˜¯192.168.42.141</li><li>èŠ‚ç‚¹client,å……å½“nfså®¢æˆ·ç«¯,ipæ˜¯192.168.42.0/24ä¸‹çš„ï¼Œå¯ä»¥pingé€š</li><li>æœºå™¨å‡å…³é—­selinuxï¼ˆæˆ‘ä¸ç”¨ï¼‰</li><li>æœºå™¨å‡å…³é—­firewalld ï¼ˆæˆ‘ä¹Ÿä¸ç”¨ï¼‰</li></ul><h1>æœåŠ¡ç«¯é…ç½®</h1><ul><li>å®‰è£…è½¯ä»¶</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y nfs-utils rpcbind</span><br></pre></td></tr></table></figure><ul><li>åˆ›å»ºæœåŠ¡ç«¯nfsç›®å½•</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir /mnt/nfs-server</span><br><span class="line">chmod 777 /mnt/nfs-server</span><br></pre></td></tr></table></figure><ul><li>é…ç½®/etc/exportsæ–‡ä»¶</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">ä¸‹é¢æ˜¯æ”¾å¼€192.168.42.0/24ç½‘æ®µ</span></span><br><span class="line">/mnt/nfs-server 192.168.42.0/24(rw,sync,no_root_squash)</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">ä¹Ÿå¯ä»¥æ”¾å¼€æ‰€æœ‰çš„ç½‘æ®µï¼Œå†™æ³•å¦‚ä¸‹</span></span><br><span class="line">/mnt/nfs-server *(ro)</span><br></pre></td></tr></table></figure><ul><li>æŸ¥çœ‹æœåŠ¡ç«¯NFSå…±äº«ç›®å½•</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">showmount -e</span><br></pre></td></tr></table></figure><ul><li>è®¾ç½®æœåŠ¡ç«¯è‡ªå¯åŠ¨</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl enable nfs-server rpcbind</span><br><span class="line">systemctl start nfs-server rpcbind</span><br></pre></td></tr></table></figure><ul><li>æ£€æµ‹nfsç«¯å£æ˜¯å¦æ­£å¸¸</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lsof -i:111</span><br></pre></td></tr></table></figure><ul><li>é˜²ç«å¢™é…ç½®</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">å…³é—­é˜²ç«å¢™ï¼Œ</span></span><br><span class="line">systemctl disable --now firewalld</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">ä¸å…³é—­é˜²ç«å¢™çš„å°±è‡ªå·±é…ç½®å§</span></span><br></pre></td></tr></table></figure><h1>å®¢æˆ·ç«¯é…ç½®</h1><ul><li>å®‰è£…è½¯ä»¶</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y nfs-utils</span><br></pre></td></tr></table></figure><ul><li>è®¾ç½®nfsæŒ‚è½½ç›®å½•</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir /mnt/nfs-data</span><br></pre></td></tr></table></figure><ul><li>æ£€æŸ¥serverçš„nfså…±äº«ç›®å½•</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">showmount -e 192.168.42.141</span><br></pre></td></tr></table></figure><ul><li>æ‰‹åŠ¨æŒ‚è½½</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mount 192.168.42.141:/home/nfs-server  /mnt/nfs-data</span><br></pre></td></tr></table></figure><ul><li>æŸ¥çœ‹æŒ‚è½½</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df -Th</span><br></pre></td></tr></table></figure><ul><li>å†™å…¥fstab</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">å†™å…¥fstabè®¾ç½®å¼€æœºè‡ªåŠ¨æŒ‚è½½</span></span><br><span class="line">/mnt/nfs-server /mnt/nfs-data  nfs defaults,_netdev 0 0 </span><br></pre></td></tr></table></figure><ul><li>æµ‹è¯•fstab</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">å…ˆå¸è½½æ‰‹åŠ¨æŒ‚è½½çš„</span></span><br><span class="line">umount /mnt/nfs-data</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">æ‰§è¡Œmount -a</span></span><br><span class="line">mount -a</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">æŸ¥çœ‹æŒ‚è½½</span></span><br><span class="line">df -Th</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">æè¿°</summary>
    
    
    
    <category term="å®‰è£…éƒ¨ç½²" scheme="https://www.dddachui.top/categories/%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2/"/>
    
    
    <category term="å®‰è£…éƒ¨ç½²" scheme="https://www.dddachui.top/tags/%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2/"/>
    
  </entry>
  
  <entry>
    <title>Linuxå¿«é€ŸæŸ¥æ‰¾åº“æ–‡ä»¶ä½ç½®</title>
    <link href="https://www.dddachui.top/posts/3a97f081.html"/>
    <id>https://www.dddachui.top/posts/3a97f081.html</id>
    <published>2023-03-26T11:46:38.000Z</published>
    <updated>2023-03-26T11:49:54.089Z</updated>
    
    <content type="html"><![CDATA[<p>ldconfig -p | grep lib_name</p><p>ldconfig -p ä¼šæ‰“å°å‡ºå½“å‰ç³»ç»Ÿå·²ç»å®‰è£…çš„åŠ¨æ€åº“ä¿¡æ¯ï¼Œç„¶åä½¿ç”¨ grep æ‰¾ä½ çš„ lib å³å¯<br><a href="https://blog.csdn.net/bjbz_cxy/article/details/108517003">https://blog.csdn.net/bjbz_cxy/article/details/108517003</a></p>]]></content>
    
    
    <summary type="html">æè¿°</summary>
    
    
    
    <category term="çŸ¥è¯†ç‚¹" scheme="https://www.dddachui.top/categories/%E7%9F%A5%E8%AF%86%E7%82%B9/"/>
    
    
    <category term="åº“æ–‡ä»¶" scheme="https://www.dddachui.top/tags/%E5%BA%93%E6%96%87%E4%BB%B6/"/>
    
  </entry>
  
  <entry>
    <title>GRUBäº†è§£</title>
    <link href="https://www.dddachui.top/posts/1be27d0f.html"/>
    <id>https://www.dddachui.top/posts/1be27d0f.html</id>
    <published>2023-03-26T11:46:27.000Z</published>
    <updated>2023-03-26T11:49:24.473Z</updated>
    
    <content type="html"><![CDATA[<h1>ä»€ä¹ˆæ˜¯GRUB</h1><ol><li>ä¸€ä¸ªæ¥è‡ªGNUçš„å¤šæ“ä½œç³»ç»Ÿå¯åŠ¨ç¨‹åº</li><li>è®¡ç®—æœºè¯»å–åˆ°ç¬¬ä¸€ä¸ªæ‰‡åŒºçš„512å­—èŠ‚æ‰¾åˆ°gurbä¹‹åï¼Œç”±ç”¨æˆ·é€‰æ‹©å“ªä¸ªç³»ç»Ÿ</li></ol><h1>bootä¸‹æ–‡ä»¶</h1><ol><li>vmlinuxæ–‡ä»¶</li><li>initramfsè™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿ<br>linuxå†…æ ¸å¯åŠ¨å‰ï¼ŒGRUBä¼šå°†è™šæ‹Ÿæ–‡ä»¶ç³»ç»ŸåŠ è½½åˆ°å†…å­˜ï¼Œå†…æ ¸å¯åŠ¨æ—¶ï¼Œä¼šåœ¨è®¿é—®çœŸæ­£çš„æ ¹æ–‡ä»¶ç³»ç»Ÿä¹‹å‰å…ˆè®¿é—®è¯¥å†…å­˜ä¸­çš„è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿï¼Œè™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿçš„ç›®çš„æ˜¯ä¸ºè®¿é—®çœŸæ­£çš„æ ¹æ–‡ä»¶æ‰«æ¸…éšœç¢ï¼Œæœ€ä¸»è¦çš„ç›®çš„æ˜¯åŠ è½½æ ¹æ–‡ä»¶ç³»ç»Ÿå­˜å‚¨ä»‹è´¨çš„é©±åŠ¨æ¨¡å—</li></ol><h1>GRUBç”¨æ³•</h1><ul><li>å®‰è£…GRUB</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grub2-install /dev/sda</span><br></pre></td></tr></table></figure><ul><li>ç”Ÿæˆé…ç½®æ–‡ä»¶</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grub2-mkconfig -o /boot/grub2/grub.cfg</span><br></pre></td></tr></table></figure><ul><li>å¸¸ç”¨å‘½ä»¤</li></ul><ol><li>insmod æ’å…¥æ¨¡å—</li><li>lsmod æ˜¾ç¤ºå·²ç»åŠ è½½çš„</li><li>set</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">set root=(hd0,msdos1) #è®¾ç½®æ ¹ç›®å½•</span><br><span class="line">set default=0 #è®¾ç½®é»˜è®¤èœå•</span><br><span class="line">set timout=5 #è®¾ç½®è¶…æ—¶</span><br><span class="line">set prefix=(hd0,msdos1)/EFI/grub</span><br></pre></td></tr></table></figure><ol start="4"><li>linux  åŠ è½½linuxå†…æ ¸</li><li>initrd åŠ è½½åˆå§‹åŒ–RAMæ•°æ®æ¨¡å—</li><li>boot</li></ol>]]></content>
    
    
    <summary type="html">æè¿°</summary>
    
    
    
    <category term="çŸ¥è¯†ç‚¹" scheme="https://www.dddachui.top/categories/%E7%9F%A5%E8%AF%86%E7%82%B9/"/>
    
    
    <category term="grub" scheme="https://www.dddachui.top/tags/grub/"/>
    
  </entry>
  
  <entry>
    <title>grubçš„ç›¸å…³æ“ä½œ</title>
    <link href="https://www.dddachui.top/posts/b72ca0dc.html"/>
    <id>https://www.dddachui.top/posts/b72ca0dc.html</id>
    <published>2023-03-26T11:46:04.000Z</published>
    <updated>2023-03-26T11:49:04.742Z</updated>
    
    <content type="html"><![CDATA[<h1>grubbyæ“ä½œ</h1><ul><li>æŸ¥çœ‹é»˜è®¤å¼•å¯¼å†…æ ¸</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grubby --default-kernel</span><br></pre></td></tr></table></figure><ul><li>æŸ¥çœ‹æ‰€æœ‰å†…æ ¸</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grubby --info=ALL</span><br></pre></td></tr></table></figure><ul><li>ä¿®æ”¹</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grubby --set-default /boot/vmlinuz-4.18.0-80.11.2.el8_0.x86_64\</span><br></pre></td></tr></table></figure><h1>æŸ¥çœ‹å¯å¼•å¯¼çš„å†…æ ¸æ•°é‡</h1><ul><li>UEFI</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk -F\&#x27; &#x27;$1==&quot;menuentry &quot; &#123;print $2&#125;&#x27; /boot/efi/EFI/kylin/grub.cfg</span><br></pre></td></tr></table></figure><ul><li>LEGACY</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /boot/grub2/grub.cfg |grep menuentry</span><br></pre></td></tr></table></figure><h1>ä¿®æ”¹å¼•å¯¼é¡ºåº</h1><ul><li>ä½¿ç”¨å‘½ä»¤ä¿®æ”¹</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grub2-set-default &#x27;KylinSec OS Linux (6.2.0-rc1) 3 (Core)&#x27;</span><br></pre></td></tr></table></figure><ul><li>ä½¿ç”¨æ•°å­—ä¿®æ”¹</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grub2-set-default 0</span><br></pre></td></tr></table></figure><ul><li>æŸ¥çœ‹ä¿®æ”¹å¯åŠ¨é¡¹çš„ç»“æœ</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grub2-editenv list</span><br></pre></td></tr></table></figure><ul><li>ç”Ÿæˆgrub.cfg</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">uefi</span></span><br><span class="line">grub2-mkconfig -o /boot/efi/EFI/kylin/grub.cfg </span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">bios</span></span><br><span class="line">grub2-mkconfig -o /boot/grub2/grub.cfg</span><br></pre></td></tr></table></figure><h1>æŸ¥çœ‹vmlinuxå‚æ•°</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grubby --info=/boot/vmlinuz-6.2.0-rc1</span><br></pre></td></tr></table></figure><h1>centos6çš„ä¿®æ”¹</h1><ol><li>æŸ¥çœ‹/etc/grub.confæ–‡ä»¶ï¼Œç¡®è®¤ç³»ç»Ÿå†…æ ¸çš„æƒ…å†µï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºç³»ç»Ÿå­˜åœ¨2ä¸ªå†…æ ¸çš„ç°è±¡ã€‚ä»ä¸Šå¾€ä¸‹å†…æ ¸ç‰ˆæœ¬ä¾æ¬¡æ˜¯2.6.32-573.18.1.el6.x86_64å’Œ2.6.32-431.23.3.el6.x86_64ã€‚</li><li>åœ¨grub.confæ–‡ä»¶ä¸­å†³å®šå¼€æœºä½¿ç”¨å“ªä¸ªå†…æ ¸ç‰ˆæœ¬åšå¯åŠ¨çš„å‚æ•°æ˜¯defaultï¼Œé»˜è®¤å€¼ä¸º0ï¼Œä»£è¡¨ä»æœ€æ–°çš„å†…æ ¸å¯åŠ¨ã€‚ä»£è¡¨å¯åŠ¨çš„å†…æ ¸ç‰ˆæœ¬ä»ä¸Šå¾€ä¸‹ä¾æ¬¡æ˜¯0ã€1ã€2ç­‰ã€‚</li><li>å¦‚æœè¦é€‰æ‹©ä»æ—§ç‰ˆå†…æ ¸ï¼Œå³ç³»ç»Ÿæœ€å¼€å§‹çš„å†…æ ¸å¯åŠ¨ï¼Œåˆ™æŠŠdefaultå€¼æ”¹ä¸º1 ï¼Œç„¶åé‡å¯æœåŠ¡å™¨ä»æ–°çš„å†…æ ¸è¿›è¡Œå¼•å¯¼</li></ol>]]></content>
    
    
    <summary type="html">æè¿°</summary>
    
    
    
    <category term="çŸ¥è¯†ç‚¹" scheme="https://www.dddachui.top/categories/%E7%9F%A5%E8%AF%86%E7%82%B9/"/>
    
    
    <category term="grub" scheme="https://www.dddachui.top/tags/grub/"/>
    
  </entry>
  
  <entry>
    <title>linuxç»Ÿè®¡å®æ—¶ç½‘é€Ÿçš„æ–¹æ³•</title>
    <link href="https://www.dddachui.top/posts/a9e5246.html"/>
    <id>https://www.dddachui.top/posts/a9e5246.html</id>
    <published>2023-03-26T10:33:58.000Z</published>
    <updated>2023-03-26T10:41:02.204Z</updated>
    
    <content type="html"><![CDATA[<h1>noload</h1><p>é€šè¿‡nloadå‘½ä»¤æ¥ç»Ÿè®¡ç½‘é€Ÿ<br>-t åˆ·æ–°æ—¶é—´é—´éš” 500ms<br>-u b/k/m/g ç½‘é€Ÿå•ä½ ä¾æ¬¡å­—èŠ‚/KB/MB/GB</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nload eth0 -u g -m </span><br></pre></td></tr></table></figure><h1>sar</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sar -n DEV 1 100</span><br></pre></td></tr></table></figure><h1>ifconfig</h1><p>RX: æ¥æ”¶æµé‡<br>TX: å‘é€æµé‡<br>è®¡ç®—æ–¹æ³•ï¼š(<strong>KB</strong>Â = æ•°å€¼/1000) (<strong>MB</strong>Â = æ•°å€¼/100000)</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">watch -n 1 ifconfig </span><br></pre></td></tr></table></figure><h1>iftop</h1>]]></content>
    
    
    <summary type="html">æè¿°</summary>
    
    
    
    <category term="ç½‘ç»œç®¡ç†" scheme="https://www.dddachui.top/categories/%E7%BD%91%E7%BB%9C%E7%AE%A1%E7%90%86/"/>
    
    
    <category term="ç½‘é€Ÿ" scheme="https://www.dddachui.top/tags/%E7%BD%91%E9%80%9F/"/>
    
  </entry>
  
  <entry>
    <title>ç½‘ç»œè¿æ¥æ•°é‡æŸ¥çœ‹</title>
    <link href="https://www.dddachui.top/posts/acb02ade.html"/>
    <id>https://www.dddachui.top/posts/acb02ade.html</id>
    <published>2023-03-26T10:33:45.000Z</published>
    <updated>2023-03-26T10:41:14.634Z</updated>
    
    <content type="html"><![CDATA[<h2 id="æŸ¥çœ‹å“ªäº›IPè¿æ¥æœ¬æœº">æŸ¥çœ‹å“ªäº›IPè¿æ¥æœ¬æœº</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netstat -an</span><br></pre></td></tr></table></figure><h2 id="æŸ¥çœ‹TCPè¿æ¥æ•°">æŸ¥çœ‹TCPè¿æ¥æ•°</h2><ul><li>ç»Ÿè®¡80ç«¯å£è¿æ¥æ•°</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netstat -nat|grepÂ -i &quot;80&quot;|wc -l</span><br></pre></td></tr></table></figure><ul><li>ç»Ÿè®¡httpdåè®®è¿æ¥æ•°</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps -ef|grep httpd|wc -l</span><br></pre></td></tr></table></figure><ul><li>ç»Ÿè®¡å·²è¿æ¥ä¸Šçš„ï¼ŒçŠ¶æ€ä¸ºâ€œestablished</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netstat -na|grep ESTABLISHED|wc -l</span><br></pre></td></tr></table></figure><ul><li>æŸ¥å‡ºå“ªä¸ªIPåœ°å€è¿æ¥æœ€å¤š,å°†å…¶å°äº†</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">netstat -na|grep ESTABLISHED|awk &#123;print $5&#125;|awk -F: &#123;print $1&#125;|sort|uniq -c|sort -r +0n</span><br><span class="line">netstat -na|grep SYN|awk &#123;print $5&#125;|awk -F: &#123;print $1&#125;|sort|uniq -c|sort -r +0n</span><br></pre></td></tr></table></figure><ul><li>æŸ¥çœ‹apacheå‰å¹¶å‘è®¿é—®æ•°</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netstat -an | grep ESTABLISHED | wc -l</span><br></pre></td></tr></table></figure><ul><li>æŸ¥çœ‹æœ‰å¤šå°‘ä¸ªè¿›ç¨‹æ•°</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps aux|grep httpd|wc -l</span><br></pre></td></tr></table></figure><h1>å­—æ®µè§£é‡Š</h1><p>TIME_WAIT 8947 ç­‰å¾…è¶³å¤Ÿçš„æ—¶é—´ä»¥ç¡®ä¿è¿œç¨‹TCPæ¥æ”¶åˆ°è¿æ¥ä¸­æ–­è¯·æ±‚çš„ç¡®è®¤<br>FIN_WAIT1 15 ç­‰å¾…è¿œç¨‹TCPè¿æ¥ä¸­æ–­è¯·æ±‚ï¼Œæˆ–å…ˆå‰çš„è¿æ¥ä¸­æ–­è¯·æ±‚çš„ç¡®è®¤<br>FIN_WAIT2 1 ä»è¿œç¨‹TCPç­‰å¾…è¿æ¥ä¸­æ–­è¯·æ±‚<br>ESTABLISHED 55 ä»£è¡¨ä¸€ä¸ªæ‰“å¼€çš„è¿æ¥<br>SYN_RECV 21 å†æ”¶åˆ°å’Œå‘é€ä¸€ä¸ªè¿æ¥è¯·æ±‚åç­‰å¾…å¯¹æ–¹å¯¹è¿æ¥è¯·æ±‚çš„ç¡®è®¤<br>CLOSING 2 æ²¡æœ‰ä»»ä½•è¿æ¥çŠ¶æ€<br>LAST_ACK 4 ç­‰å¾…åŸæ¥çš„å‘å‘è¿œç¨‹TCPçš„è¿æ¥ä¸­æ–­è¯·æ±‚çš„ç¡®è®¤</p><h1>TCPè¿æ¥çŠ¶æ€è¯¦è§£</h1><p>LISTENï¼š ä¾¦å¬æ¥è‡ªè¿œæ–¹çš„TCPç«¯å£çš„è¿æ¥è¯·æ±‚<br>SYN-SENTï¼š å†å‘é€è¿æ¥è¯·æ±‚åç­‰å¾…åŒ¹é…çš„è¿æ¥è¯·æ±‚<br>SYN-RECEIVEDï¼šå†æ”¶åˆ°å’Œå‘é€ä¸€ä¸ªè¿æ¥è¯·æ±‚åç­‰å¾…å¯¹æ–¹å¯¹è¿æ¥è¯·æ±‚çš„ç¡®è®¤<br>ESTABLISHEDï¼š ä»£è¡¨ä¸€ä¸ªæ‰“å¼€çš„è¿æ¥<br>FIN-WAIT-1ï¼š ç­‰å¾…è¿œç¨‹TCPè¿æ¥ä¸­æ–­è¯·æ±‚ï¼Œæˆ–å…ˆå‰çš„è¿æ¥ä¸­æ–­è¯·æ±‚çš„ç¡®è®¤<br>FIN-WAIT-2ï¼š ä»è¿œç¨‹TCPç­‰å¾…è¿æ¥ä¸­æ–­è¯·æ±‚<br>CLOSE-WAITï¼š ç­‰å¾…ä»æœ¬åœ°ç”¨æˆ·å‘æ¥çš„è¿æ¥ä¸­æ–­è¯·æ±‚<br>CLOSINGï¼š ç­‰å¾…è¿œç¨‹TCPå¯¹è¿æ¥ä¸­æ–­çš„ç¡®è®¤<br>LAST-ACKï¼š ç­‰å¾…åŸæ¥çš„å‘å‘è¿œç¨‹TCPçš„è¿æ¥ä¸­æ–­è¯·æ±‚çš„ç¡®è®¤<br>TIME-WAITï¼š ç­‰å¾…è¶³å¤Ÿçš„æ—¶é—´ä»¥ç¡®ä¿è¿œç¨‹TCPæ¥æ”¶åˆ°è¿æ¥ä¸­æ–­è¯·æ±‚çš„ç¡®è®¤<br>CLOSEDï¼š æ²¡æœ‰ä»»ä½•è¿æ¥çŠ¶æ€</p>]]></content>
    
    
    <summary type="html">æè¿°</summary>
    
    
    
    <category term="ç½‘ç»œç®¡ç†" scheme="https://www.dddachui.top/categories/%E7%BD%91%E7%BB%9C%E7%AE%A1%E7%90%86/"/>
    
    
    <category term="ç½‘ç»œè¿æ¥æ•°" scheme="https://www.dddachui.top/tags/%E7%BD%91%E7%BB%9C%E8%BF%9E%E6%8E%A5%E6%95%B0/"/>
    
  </entry>
  
  <entry>
    <title>ç½‘å¡æ”¹åè„šæœ¬ä½¿ç”¨</title>
    <link href="https://www.dddachui.top/posts/74b3b75a.html"/>
    <id>https://www.dddachui.top/posts/74b3b75a.html</id>
    <published>2023-03-26T10:33:25.000Z</published>
    <updated>2023-03-26T10:42:17.495Z</updated>
    
    <content type="html"><![CDATA[<h1>é—®é¢˜</h1><ul><li>ç½‘å¡åè¦æŒ‰ç…§å®¢æˆ·éœ€æ±‚æ”¹</li></ul><h1>è§£å†³</h1><h2 id="1-ä¿®æ”¹grub">1.ä¿®æ”¹grub</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/default/grub</span><br></pre></td></tr></table></figure><ul><li>æ·»åŠ  net.ifnames=1 biosdevname=0 å¦‚ä¸‹å›¾æ‰€ç¤º</li></ul><p><img src="images/%E5%9B%BE%E5%BA%93/image-20220331170233957.png" alt="image-20220331170233957"></p><h2 id="2-é‡å»º">2.é‡å»º</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grub2-mkconfig -o /boot/grub2/grub.cfg</span><br></pre></td></tr></table></figure><p><img src="images/%E5%9B%BE%E5%BA%93/image-20220331170404356.png" alt="image-20220331170404356"></p><h2 id="3-æ‰§è¡Œè„šæœ¬">3.æ‰§è¡Œè„šæœ¬</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./ifcfg_cluster_manage create /var/log/ifcfg_cluster_manage.log</span><br></pre></td></tr></table></figure><ul><li>åœ¨/etc/udev/rules.d/ä¼šç”Ÿæˆ70-persistent-net.rulesé…ç½®ï¼Œä¿®æ”¹ç½‘å¡åå’Œ/etc/sysconfig/network-scripts/ä¸‹é¢çš„é…ç½®ä¸€è‡´å°±å¯ä»¥äº†</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h1&gt;é—®é¢˜&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;ç½‘å¡åè¦æŒ‰ç…§å®¢æˆ·éœ€æ±‚æ”¹&lt;/li&gt;
&lt;/ul&gt;
&lt;h1&gt;è§£å†³&lt;/h1&gt;
&lt;h2 id=&quot;1-ä¿®æ”¹grub&quot;&gt;1.ä¿®æ”¹grub&lt;/h2&gt;
&lt;figure class=&quot;highlight shell&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class</summary>
      
    
    
    
    <category term="ç½‘ç»œç®¡ç†" scheme="https://www.dddachui.top/categories/%E7%BD%91%E7%BB%9C%E7%AE%A1%E7%90%86/"/>
    
    
    <category term="ç½‘å¡æ”¹å" scheme="https://www.dddachui.top/tags/%E7%BD%91%E5%8D%A1%E6%94%B9%E5%90%8D/"/>
    
  </entry>
  
  <entry>
    <title>ç½‘å¡å¤šé˜Ÿåˆ—</title>
    <link href="https://www.dddachui.top/posts/2e0e8049.html"/>
    <id>https://www.dddachui.top/posts/2e0e8049.html</id>
    <published>2023-03-26T10:33:12.000Z</published>
    <updated>2023-03-26T10:42:44.100Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://www.bbsmax.com/A/6pdDbDgkJw/">https://www.bbsmax.com/A/6pdDbDgkJw/</a><br><a href="https://www.cnblogs.com/mauricewei/p/10502300.html">https://www.cnblogs.com/mauricewei/p/10502300.html</a></p><h1>ä»€ä¹ˆæ˜¯ç½‘å¡å¤šé˜Ÿåˆ—</h1><p>å¦‚æœåœ¨å¤šæ ¸ CPU çš„æœåŠ¡å™¨ä¸Šï¼Œç½‘å¡å†…éƒ¨ä¼šæœ‰å¤šä¸ªÂ Ring Bufferï¼ŒNIC è´Ÿè´£å°†ä¼ è¿›æ¥çš„æ•°æ®åˆ†é…ç»™ä¸åŒçš„Â Ring Bufferï¼ŒåŒæ—¶è§¦å‘çš„ IRQ ä¹Ÿå¯ä»¥åˆ†é…åˆ°å¤šä¸ª CPU ä¸Šï¼Œè¿™æ ·å­˜åœ¨å¤šä¸ª Ring Buffer çš„æƒ…å†µä¸‹ Ring Buffer ç¼“å­˜çš„æ•°æ®ä¹ŸåŒæ—¶è¢«å¤šä¸ª CPU å¤„ç†ï¼Œå°±èƒ½æé«˜æ•°æ®çš„å¹¶è¡Œå¤„ç†èƒ½åŠ›</p><p>é€šå¸¸æƒ…å†µä¸‹ï¼Œä¸€å¼ ç½‘å¡ä¼šæœ‰ä¸€ä¸ªé˜Ÿåˆ—ç”¨æ¥æ¥å‘æ”¶ç½‘ç»œæ•°æ®åŒ…ï¼Œæˆ‘ä»¬æ‰€è¯´çš„ä¸€ä¸ªé˜Ÿåˆ—ä½ ä¹Ÿå¯ä»¥ç†è§£æˆä¸€ä¸ªå¤„ç†æ•°æ®åŒ…çš„è¿›ç¨‹ã€‚</p><p>ä½†æ˜¯éšç€æ—¶ä»£çš„å‘å±•ï¼Œç½‘å¡æ”¯æŒçš„æµé‡å¸¦å®½è¶Šæ¥è¶Šå¤§ï¼Œå¦‚æœè¿˜æ˜¯ä½¿ç”¨ä¸€ä¸ªé˜Ÿåˆ—æ¥æ¥æ”¶ç½‘ç»œæ•°æ®åŒ…ï¼Œå¿…ç„¶å®¹æ˜“é€ æˆæ•°æ®åŒ…é˜»å¡å’Œå•cpuå¤„ç†ä¸è¿‡æ¥ã€‚äºæ˜¯å‡ºç°äº†ä¸€æ‰¹é«˜ç«¯çš„æ™ºèƒ½ç½‘å¡ï¼Œè¿™äº›ç½‘å¡å¯ä»¥æ”¯æŒä½¿ç”¨å¤šä¸ªé˜Ÿåˆ—æ¥æ¥å‘æ”¶æ•°æ®åŒ…ã€‚æ¯”å¦‚1822ç½‘å¡</p><p>é˜Ÿåˆ—ä¸ªæ•°ä¹Ÿå¯ä»¥æ ¹æ®æƒ…å†µè®¾ç½®ï¼Œä¸€ä¸ªé˜Ÿåˆ—å¯ä»¥ç†è§£æ˜¯ä¸€ä¸ªå¤„ç†æ•°æ®åŒ…çš„è¿›ç¨‹ï¼Œå¤šä¸ªé˜Ÿåˆ—å¯¹åº”å¤šä¸ªè¿›ç¨‹ï¼Œè¿™äº›è¿›ç¨‹å¯ä»¥åˆ†æ•£åˆ°ä¸åŒçš„cpuå»å¤„ç†ï¼Œè¿™æ ·å°±ç¼“è§£äº†å•cpuçš„æ‰§è¡Œå‹åŠ›ã€‚</p><p>å“ªä¹ˆç½‘å¡æ”¶åˆ°æ•°æ®åŒ…åäº¤ç»™å“ªä¸ªé˜Ÿåˆ—å¤„ç†å‘¢ï¼Ÿç½‘å¡é©±åŠ¨ä¼šæ ¹æ®æ•°æ®åŒ…çš„æºç›®çš„IPç­‰äº”å…ƒç»„ä¿¡æ¯è®¡ç®—ä¸€ä¸ªhashå€¼ï¼Œç„¶åäº¤ç”±å¯¹åº”çš„é˜Ÿåˆ—å¤„ç†ã€‚</p><h1>æŸ¥çœ‹ç½‘å¡æ˜¯å¦æ”¯æŒ</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ethtool -l eth0</span><br></pre></td></tr></table></figure><ul><li>å¦‚ä¸‹</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">[root@localhost ~]# ethtool -l eth0</span><br><span class="line">Channel parameters for eth0:</span><br><span class="line">Pre-set maximums:</span><br><span class="line">RX: 0</span><br><span class="line">TX: 0</span><br><span class="line">Other: 0</span><br><span class="line">Combined: 2  #å¤§äº1  è¡¨ç¤ºæ”¯æŒå¤šé˜Ÿåˆ—</span><br><span class="line">Current hardware settings:</span><br><span class="line">RX: 0</span><br><span class="line">TX: 0</span><br><span class="line">Other: 0</span><br><span class="line">Combined: 2  #å½“å‰çš„å¤šé˜Ÿåˆ—æ•°é‡ï¼Œå¤§äº1æ ‡è¯†å¼€å¯äº†</span><br></pre></td></tr></table></figure><h1>è°ƒæ•´</h1><ul><li><h3 id="è°ƒæ•´-Ring-Buffer-é˜Ÿåˆ—æ•°é‡">è°ƒæ•´ Ring Buffer é˜Ÿåˆ—æ•°é‡</h3></li></ul><p>æ³¨æ„ï¼Œè®¾ç½®çš„é˜Ÿåˆ—æ•°çš„å‰ææ˜¯ç½‘å¡é¦–å…ˆè¦æ”¯æŒå¤šé˜Ÿåˆ—ï¼Œä¸”ä¸èƒ½è¶…è¿‡ç½‘å¡æ”¯æŒçš„æœ€å¤§çš„é˜Ÿåˆ—æ•°ã€‚å½“ç½‘å¡é©±åŠ¨æ¯”è¾ƒè€æ—§çš„æ—¶å€™ï¼Œä¹Ÿæœ‰å¯èƒ½ä¼šè®¾ç½®å¤±è´¥ï¼Œå»ºè®®å°†ç½‘å¡é©±åŠ¨å…ˆå‡çº§è‡³æœ€æ–°ç‰ˆæœ¬</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ethtool -L eth1-combined 16</span><br></pre></td></tr></table></figure><ul><li><h3 id="è°ƒæ•´-Ring-Buffer-é˜Ÿåˆ—å¤§å°">è°ƒæ•´ Ring Buffer é˜Ÿåˆ—å¤§å°</h3></li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ethtool -G eth0 rx 4096</span><br><span class="line">````</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ç½‘å¡æ”¶åˆ°çš„æ•°æ®åŒ…ç»Ÿè®¡</span></span><br><span class="line">- ### ç½‘å¡æ”¶åˆ°çš„æ•°æ®åŒ…ç»Ÿè®¡</span><br><span class="line">```shell</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">RX å°±æ˜¯æ”¶åˆ°æ•°æ®ï¼ŒTX æ˜¯å‘å‡ºæ•°æ®</span></span><br><span class="line">ethtool -S em1 | more</span><br></pre></td></tr></table></figure><ul><li><h3 id="å¸¦æœ‰-drop-å­—æ ·çš„ç»Ÿè®¡å’Œ-fifo-errors-çš„ç»Ÿè®¡">å¸¦æœ‰ drop å­—æ ·çš„ç»Ÿè®¡å’Œ fifo_errors çš„ç»Ÿè®¡</h3></li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">å‘é€é˜Ÿåˆ—å’Œæ¥æ”¶é˜Ÿåˆ— drop çš„æ•°æ®åŒ…æ•°é‡æ˜¾ç¤ºåœ¨è¿™é‡Œã€‚å¹¶ä¸”æ‰€æœ‰ queue_drops åŠ èµ·æ¥ç­‰äº rx_fifo_errorsã€‚æ‰€ä»¥æ€»ä½“ä¸Šèƒ½é€šè¿‡ rx_fifo_errors çœ‹åˆ° Ring Buffer ä¸Šæ˜¯å¦æœ‰ä¸¢åŒ…ã€‚å¦‚æœæœ‰çš„è¯ä¸€æ–¹é¢æ˜¯çœ‹æ˜¯å¦éœ€è¦è°ƒæ•´ä¸€ä¸‹æ¯ä¸ªé˜Ÿåˆ—æ•°æ®çš„åˆ†é…ï¼Œæˆ–è€…æ˜¯å¦è¦åŠ å¤§ Ring Buffer çš„å¤§å°</span></span><br><span class="line">ethtool -S em1 | grep -iE &quot;error|drop&quot;</span><br></pre></td></tr></table></figure><ul><li>æŸ¥çœ‹ring bufå¤§å°</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">RX å’Œ TX æœ€å¤§æ˜¯ 4096ï¼Œå½“å‰å€¼ä¸º 256 ã€‚é˜Ÿåˆ—è¶Šå¤§ä¸¢åŒ…çš„å¯èƒ½è¶Šå°ï¼Œä½†æ•°æ®å»¶è¿Ÿä¼šå¢åŠ </span></span><br><span class="line">ethtool -g eth0</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">ç»“æœå¦‚ä¸‹</span></span><br><span class="line">Ring parameters for eth0:</span><br><span class="line">Pre-set maximums:</span><br><span class="line">RX: 2048</span><br><span class="line">RX Mini: 0</span><br><span class="line">RX Jumbo: 0</span><br><span class="line">TX: 2048</span><br><span class="line">Current hardware settings:</span><br><span class="line">RX: 2048</span><br><span class="line">RX Mini: 0</span><br><span class="line">RX Jumbo: 0</span><br><span class="line">TX: 2048</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">æè¿°</summary>
    
    
    
    <category term="ç½‘ç»œç®¡ç†" scheme="https://www.dddachui.top/categories/%E7%BD%91%E7%BB%9C%E7%AE%A1%E7%90%86/"/>
    
    
    <category term="å¤šé˜Ÿåˆ—" scheme="https://www.dddachui.top/tags/%E5%A4%9A%E9%98%9F%E5%88%97/"/>
    
  </entry>
  
  <entry>
    <title>ç«¯å£è½¬å‘</title>
    <link href="https://www.dddachui.top/posts/c0e91c93.html"/>
    <id>https://www.dddachui.top/posts/c0e91c93.html</id>
    <published>2023-03-26T10:32:53.000Z</published>
    <updated>2023-03-26T10:43:04.509Z</updated>
    
    <content type="html"><![CDATA[<p>æœ‰æ—¶ï¼Œä¸¤ä¸ªä¸»æœºAã€Cä¹‹é—´ç½‘ç»œå¹¶ä¸äº’é€šï¼Œä½†Aå’ŒBäº’é€šï¼ŒBå’ŒCäº’é€šï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨Bä¸»æœºåšä¸€ä¸ªç«¯å£è½¬å‘ï¼Œä½¿å¾—ä¸»æœºAå¯ä»¥è®¿é—®ä¸»æœºCä¸Šçš„ç½‘ç»œæœåŠ¡ã€‚</p><p>èƒ½å¤Ÿå®ç°ç«¯å£è½¬å‘çš„è½¯ä»¶æœ‰å¾ˆå¤šï¼Œå¦‚iptablesã€socatã€portmapã€rinetdç­‰ï¼Œè€Œsshä¹Ÿæ˜¯å¸¸è§çš„ä¸€ä¸ªï¼Œç”¨æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">sshæœ¬åœ°ç«¯å£è½¬å‘ï¼Œåœ¨Aæœºå™¨ä¸Šæ‰§è¡Œï¼Œä¼šåœ¨Aæœºå¼€å¯2001ç«¯å£ï¼Œå¹¶å°†æ­¤ç«¯å£æ•°æ®å‘åˆ°Bæœºï¼ŒBæœºåˆè½¬å‘åˆ°Cæœºçš„80ç«¯å£</span></span><br><span class="line">ssh -fgN -L2001:host_c:80 work@host_b</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">sshè¿œç«¯ç«¯å£è½¬å‘ï¼Œåœ¨Bæœºå™¨ä¸Šæ‰§è¡Œï¼Œåœ¨Aæœºå¼€å¯22333ç«¯å£(ç”±AæœºsshdæœåŠ¡æ‰“å¼€)ï¼Œå°†Aæœº22333ç«¯å£æµé‡é€šè¿‡Bæœº(ä¸­è½¬æœº)è½¬åˆ°Cæœºçš„80ç«¯å£ä¸Š</span></span><br><span class="line">ssh -fgN -R 22333:host_c:80 work@host_a</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">sshè¿œç«¯åŠ¨æ€ç«¯å£è½¬å‘ï¼Œåœ¨Bæœºå™¨ä¸Šæ‰§è¡Œï¼Œä¼šåœ¨Aæœºå¼€å¯2222ç«¯å£å¼€æ”¾socksä»£ç†æœåŠ¡ï¼Œè¢«ä»£ç†çš„æ•°æ®ä¼šå‘åˆ°Bæœºï¼ŒBæœºåˆè½¬å‘åˆ°ä»»ä½•Bæœºèƒ½è®¿é—®çš„ç½‘ç»œæœåŠ¡ä¸Š</span></span><br><span class="line">ssh -fgN -R 2222 work@host_a</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">sshæœ¬åœ°åŠ¨æ€ç«¯å£è½¬å‘ï¼Œåœ¨Aæœºå™¨ä¸Šæ‰§è¡Œï¼Œä¼šåœ¨Aæœºå¼€å¯2222ç«¯å£å¼€æ”¾socksä»£ç†æœåŠ¡ï¼Œè¢«ä»£ç†çš„æ•°æ®ä¼šå‘åˆ°Bæœºï¼ŒBæœºåˆè½¬å‘åˆ°ä»»ä½•Bæœºèƒ½è®¿é—®çš„ç½‘ç»œæœåŠ¡ä¸Š</span></span><br><span class="line">ssh -Nfg -D 2222 work@host_b</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Aæœºé€šè¿‡æœ¬æœºsocksä»£ç†ï¼Œç™»å½•åˆ°Cæœº</span></span><br><span class="line">ssh -o ProxyCommand=&#x27;ncat --proxy 127.0.0.1:2222 --proxy-type socks5 %h %p&#x27; work@host_c</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Aæœºé€šè¿‡Bæœºsshç™»å½•Cæœºï¼Œå…¶å®å°±æ˜¯ä¸¤æ¬¡sshç™»å½•è¿‡ç¨‹</span></span><br><span class="line">ssh -t work@host_b &#x27;ssh work@host_c&#x27;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">æè¿°</summary>
    
    
    
    <category term="ç½‘ç»œç®¡ç†" scheme="https://www.dddachui.top/categories/%E7%BD%91%E7%BB%9C%E7%AE%A1%E7%90%86/"/>
    
    
    <category term="ç«¯å£è½¬å‘" scheme="https://www.dddachui.top/tags/%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91/"/>
    
  </entry>
  
</feed>
